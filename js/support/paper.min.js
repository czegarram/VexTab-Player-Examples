var paper=new function(){var k=new function(){function a(a,b,c){if(s)try{return delete a[b],s(a,b,c)}catch(d){}(c.get||c.set)&&a.__defineGetter__?(c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)):a[b]=c.value;return a}function b(a,b){if(A)try{return A(a,b)}catch(c){}var d=a.__lookupGetter__&&a.__lookupGetter__(b);return d?{get:d,set:a.__lookupSetter__(b),enumerable:!0,configurable:!0}:a.hasOwnProperty(b)?{value:a[b],enumerable:!0,configurable:!0,writable:!0}:null}function c(c,
d,e,g,h,m){function j(f,m,s,A){var m=m||(m=b(d,f))&&(m.get?m:m.value),k="function"===typeof m,n=m,r=h||k?m&&m.get?f in c:c[f]:null;if((s||void 0!==m&&d.hasOwnProperty(f))&&(!h||!r)){if(k){if(r&&/\bthis\.base\b/.test(m)){var Jc=g&&g[f]==r,n=function(){var c=b(this,"base");a(this,"base",{value:Jc?g[f]:r,configurable:!0});try{return m.apply(this,arguments)}finally{c?a(this,"base",c):delete this.base}};n.toString=function(){return m.toString()};n.valueOf=function(){return m.valueOf()}}q&&(0===m.length&&
(t=f.match(/^(get|is)(([A-Z])(.*))$/)))&&q.push([t[3].toLowerCase()+t[4],t[2]])}if(!n||k||!n.get)n={value:n,writable:!0};if((b(c,f)||{configurable:!0}).configurable)n.configurable=!0,n.enumerable=e;a(c,f,n)}if(A&&k&&(!h||!A[f]))A[f]=function(a){return a&&c[f].apply(a,p.call(arguments,1))}}var q,t;if(d){q=[];for(var s in d)d.hasOwnProperty(s)&&!f.test(s)&&j(s,null,!0,m);j("toString");j("valueOf");m=0;for(s=q&&q.length;m<s;m++)try{t=q[m];var A=t[1];j(t[0],{get:c["get"+A]||c["is"+A],set:c["set"+A]},
!0)}catch(k){}}return c}function d(a,b,c,d){try{a&&(d||void 0===d&&j(a)?m:q).call(a,b,c=c||a)}catch(e){if(e!==k.stop)throw e;}return c}function e(a){return d(a,function(a,b){this[b]=a},new a.constructor)}var f=/^(statics|generics|preserve|enumerable|prototype|toString|valueOf)$/,g=Object.prototype,h=g.toString,g=Array.prototype,j=Array.isArray=Array.isArray||function(a){return"[object Array]"===h.call(a)},p=g.slice,m=g.forEach||function(a,b){for(var c=0,d=this.length;c<d;c++)a.call(b,this[c],c,this)},
q=function(a,b){for(var c in this)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)},t=Object.create||function(a){return{__proto__:a}},s=Object.defineProperty,A=Object.getOwnPropertyDescriptor;return c(function(){},{inject:function(a){if(a){var b=this.prototype,d=Object.getPrototypeOf(b).constructor,e=!0===a.statics?a:a.statics;e!=a&&c(b,a,a.enumerable,d&&d.prototype,a.preserve,a.generics&&this);c(this,e,!0,d,a.preserve)}b=1;for(d=arguments.length;b<d;b++)this.inject(arguments[b]);return this},extend:function(b){var d=
function(){if(this.initialize)return this.initialize.apply(this,arguments)};d.prototype=t(this.prototype);d.toString=function(){return(this.prototype.initialize||function(){}).toString()};a(d.prototype,"constructor",{value:d,writable:!0,configurable:!0});c(d,this,!0);return arguments.length?this.inject.apply(d,arguments):d}},!0).inject({inject:function(){for(var a=0,b=arguments.length;a<b;a++)c(this,arguments[a],arguments[a].enumerable);return this},extend:function(){var a=t(this);return a.inject.apply(a,
arguments)},each:function(a,b){return d(this,a,b)},clone:function(){return e(this)},statics:{each:d,clone:e,define:a,describe:b,create:function(a){return t(a.prototype)},isPlainObject:function(a){return(a=null!==a&&"object"===typeof a&&Object.getPrototypeOf(a))&&(a===Object.prototype||a===k.prototype)},check:function(a){return!!(a||0===a)},pick:function(){for(var a=0,b=arguments.length;a<b;a++)if(void 0!==arguments[a])return arguments[a];return null},stop:{}}})};this.Base=k.inject({generics:!0,clone:function(){return new this.constructor(this)},
toString:function(){return"{ "+k.each(this,function(a,b){if(!/^_/.test(b)){var c=typeof a;this.push(b+": "+("number"===c?k.formatFloat(a):"string"===c?"'"+a+"'":a))}},[]).join(", ")+" }"},toJson:function(){return k.toJson(this)},statics:{_types:{},extend:function(a){var b=this.base.apply(this,arguments);a._type&&(k._types[a._type]=b);return b},equals:function(a,b){if(a==b)return!0;if(null!=a&&a.equals)return a.equals(b);if(null!=b&&b.equals)return b.equals(a);if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==
b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(!k.equals(a[c],b[c]))return!1;return!0}if("object"===typeof a&&"object"===typeof b){d=function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&"undefined"===typeof b[c])return!1;return!0};if(!d(a,b)||!d(b,a))return!1;for(c in a)if(a.hasOwnProperty(c)&&!k.equals(a[c],b[c]))return!1;return!0}return!1},read:function(a,b,c,d,e){if(this===k)return c=this.peek(a,b),a._index++,a._read=1,c;var f=this.prototype,g=f._readIndex,b=b||g&&a._index||0;c||(c=a.length-
b);var h=a[b];if(h instanceof this||(f._readNull||e)&&null==h&&1>=c)return g&&(a._index=b+1),h&&d?h.clone():h;h=k.create(this);g&&(h._read=!0);h=h.initialize.apply(h,0<b||c<a.length?Array.prototype.slice.call(a,b,b+c):a)||h;g&&(a._index=b+h._read,a._read=h._read,delete h._read);return h},peek:function(a,b){return a[a._index=b||a._index||0]},readAll:function(a,b,c){for(var d=[],e,b=b||0,f=a.length;b<f;b++)d.push(Array.isArray(e=a[b])?this.read(e,0,0,c):this.read(a,b,1,c));return d},readNamed:function(a,
b,c){var d=this.getNamed(a,b),e=void 0!==d;e&&!1!==c&&(a._filtered||(a._filtered=k.merge(a[0])),delete a._filtered[b]);return this.read(e?[d]:a)},getNamed:function(a,b){var c=a[0];void 0===a._hasObject&&(a._hasObject=1===a.length&&k.isPlainObject(c));if(a._hasObject)return value=c[b],void 0!==value?value:null},hasNamed:function(a,b){return!!this.getNamed(a,b)},serialize:function(a,b){if(a&&a._serialize){var c=a._serialize();!b&&c[0]!==a._type&&c.unshift(a._type);return c}if("object"!==typeof a)return a;
c=a;if(Array.isArray(a))for(var c=[],d=0,e=a.length;d<e;d++)c[d]=k.serialize(a[d],!0);else if(k.isPlainObject(a))for(d in c={},a)a.hasOwnProperty(d)&&(c[d]=k.serialize(a[d],!0));return c},deserialize:function(a){var b=a;if(Array.isArray(a)){for(var c=k._types[a[0]],b=[],d=c?1:0,e=a.length;d<e;d++)b.push(k.deserialize(a[d]));c&&(a=b,b=k.create(c),b.initialize.apply(b,a))}else if(k.isPlainObject(a))for(c in b={},a)b[c]=k.deserialize(a[c]);return b},toJson:function(a){return JSON.stringify(k.serialize(a))},
fromJson:function(a){return k.deserialize(JSON.parse(a))},splice:function(a,b,c,d){for(var e=b&&b.length,f=void 0===c,c=f?a.length:c,g=0;g<e;g++)b[g]._index=c+g;if(f)return a.push.apply(a,b),[];g=[c,d];b&&g.push.apply(g,b);b=a.splice.apply(a,g);g=0;for(d=b.length;g<d;g++)delete b[g]._index;g=c+e;for(d=a.length;g<d;g++)a[g]._index=g;return b},merge:function(){return k.each(arguments,function(a){k.each(a,function(a,c){this[c]=a},this)},new k,!0)},capitalize:function(a){return a.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},
camelize:function(a){return a.replace(/-(.)/g,function(a,c){return c.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},formatFloat:function(a){return(Math.round(1E5*a)/1E5).toString()},toFloat:function(a){return parseFloat(a,10)}}});var wa={attach:function(a,b){if("string"!==typeof a)return k.each(a,function(a,b){this.attach(b,a)},this);var c=this._eventTypes[a];if(!c)return this;var d=this._handlers=this._handlers||{},d=d[a]=d[a]||[];-1==d.indexOf(b)&&
(d.push(b),c.install&&1==d.length&&c.install.call(this,a));return this},detach:function(a,b){if("string"!==typeof a)return k.each(a,function(a,b){this.detach(b,a)},this);var c=this._eventTypes[a],d=this._handlers&&this._handlers[a],e;c&&d&&(!b||-1!=(e=d.indexOf(b))&&1==d.length?(c.uninstall&&c.uninstall.call(this,a),delete this._handlers[a]):-1!=e&&d.splice(e,1));return this},fire:function(a,b){var c=this._handlers&&this._handlers[a];if(!c)return!1;var d=[].slice.call(arguments,1);k.each(c,function(a){!1===
a.apply(this,d)&&(b&&b.stop)&&b.stop()},this);return!0},responds:function(a){return!(!this._handlers||!this._handlers[a])},statics:{inject:function(){for(var a=0,b=arguments.length;a<b;a++){var c=arguments[a],d=c._events;if(d){var e={};k.each(d,function(a,b){var d="string"===typeof a,j=d?a:b,p=k.capitalize(j),m=j.substring(2).toLowerCase();e[m]=d?{}:a;j="_"+j;c["get"+p]=function(){return this[j]};c["set"+p]=function(a){a?this.attach(m,a):this[j]&&this.detach(m,this[j]);this[j]=a}});c._eventTypes=
e}this.base(c)}return this}}},xa=this.PaperScope=k.extend({initialize:function(a){paper=this;this.project=null;this.projects=[];this.tools=[];this.palettes=[];this._id=a&&(a.getAttribute("id")||a.src)||"paperscope-"+xa._id++;a&&a.setAttribute("id",this._id);xa._scopes[this._id]=this},version:0.3,getView:function(){return this.project&&this.project.view},getTool:function(){this._tool||(this._tool=new ya);return this._tool},evaluate:function(a){a=na.evaluate(a,this);H.updateFocus();return a},install:function(a){var b=
this;k.each(["project","view","tool"],function(c){k.define(a,c,{configurable:!0,writable:!0,get:function(){return b[c]}})});for(var c in this)!/^(version|_id|load)/.test(c)&&!(c in a)&&(a[c]=this[c])},setup:function(a){paper=this;this.project=new fb(a)},clear:function(){for(var a=this.projects.length-1;0<=a;a--)this.projects[a].remove();for(a=this.tools.length-1;0<=a;a--)this.tools[a].remove();for(a=this.palettes.length-1;0<=a;a--)this.palettes[a].remove()},remove:function(){this.clear();delete xa._scopes[this._id]},
statics:{_scopes:{},_id:0,get:function(a){"object"===typeof a&&(a=a.getAttribute("id"));return this._scopes[a]||null}}}),Qb=k.extend(wa,{initialize:function(a){this._scope=paper;this._index=this._scope[this._list].push(this)-1;(a||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];a&&a!=this&&a.fire("deactivate");this._scope[this._reference]=this;this.fire("activate",a);return!0},isActive:function(){return this._scope[this._reference]===
this},remove:function(){if(null==this._index)return!1;k.splice(this._scope[this._list],null,this._index,1);this._scope[this._reference]==this&&(this._scope[this._reference]=null);this._scope=null;return!0}}),n=this.Point=k.extend({_readIndex:!0,initialize:function(a,b){var c=typeof a;"number"===c?(c="number"===typeof b,this.x=a,this.y=c?b:a,this._read&&(this._read=c?2:1)):"undefined"===c||null===a?(this.x=this.y=0,this._read&&(this._read=null===a?1:0)):(Array.isArray(a)?(this.x=a[0],this.y=1<a.length?
a[1]:a[0]):null!=a.x?(this.x=a.x,this.y=a.y):null!=a.width?(this.x=a.width,this.y=a.height):null!=a.angle?(this.x=a.length,this.y=0,this.setAngle(a.angle)):(this.x=this.y=0,this._read&&(this._read=0)),this._read&&(this._read=1))},_serialize:function(){return[this.x,this.y]},set:function(a,b){this.x=a;this.y=b;return this},clone:function(){return n.create(this.x,this.y)},toString:function(){var a=k.formatFloat;return"{ x: "+a(this.x)+", y: "+a(this.y)+" }"},add:function(a){a=n.read(arguments);return n.create(this.x+
a.x,this.y+a.y)},subtract:function(a){a=n.read(arguments);return n.create(this.x-a.x,this.y-a.y)},multiply:function(a){a=n.read(arguments);return n.create(this.x*a.x,this.y*a.y)},divide:function(a){a=n.read(arguments);return n.create(this.x/a.x,this.y/a.y)},modulo:function(a){a=n.read(arguments);return n.create(this.x%a.x,this.y%a.y)},negate:function(){return n.create(-this.x,-this.y)},transform:function(a){return a?a._transformPoint(this):this},getDistance:function(a,b){var a=n.read(arguments),c=
a.x-this.x,d=a.y-this.y,c=c*c+d*d;return b?c:Math.sqrt(c)},getLength:function(){var a=this.x*this.x+this.y*this.y;return arguments.length&&arguments[0]?a:Math.sqrt(a)},setLength:function(a){if(this.isZero()){var b=this._angle||0;this.set(Math.cos(b)*a,Math.sin(b)*a)}else a/=this.getLength(),0==a&&this.getAngle(),this.set(this.x*a,this.y*a);return this},normalize:function(a){void 0===a&&(a=1);var b=this.getLength(),a=0!=b?a/b:0,a=n.create(this.x*a,this.y*a);a._angle=this._angle;return a},getAngle:function(a){return 180*
this.getAngleInRadians(a)/Math.PI},setAngle:function(a){a=this._angle=a*Math.PI/180;if(!this.isZero()){var b=this.getLength();this.set(Math.cos(a)*b,Math.sin(a)*b)}return this},getAngleInRadians:function(){if(void 0===arguments[0])return null==this._angle&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var a=n.read(arguments),b=this.getLength()*a.getLength();return L.isZero(b)?NaN:Math.acos(this.dot(a)/b)},getAngleInDegrees:function(a){return this.getAngle(a)},getQuadrant:function(){return 0<=
this.x?0<=this.y?1:4:0<=this.y?2:3},getDirectedAngle:function(a){a=n.read(arguments);return 180*Math.atan2(this.cross(a),this.dot(a))/Math.PI},rotate:function(a,b){if(0===a)return this.clone();var a=a*Math.PI/180,c=b?this.subtract(b):this,d=Math.sin(a),e=Math.cos(a),c=n.create(c.x*e-c.y*d,c.y*e+c.x*d);return b?c.add(b):c},equals:function(a){a=n.read(arguments);return this.x==a.x&&this.y==a.y},isInside:function(a){return a.contains(this)},isClose:function(a,b){return this.getDistance(a)<b},isColinear:function(a){return 1E-5>
this.cross(a)},isOrthogonal:function(a){return 1E-5>this.dot(a)},isZero:function(){return L.isZero(this.x)&&L.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(a){a=n.read(arguments);return this.x*a.x+this.y*a.y},cross:function(a){a=n.read(arguments);return this.x*a.y-this.y*a.x},project:function(a){a=n.read(arguments);if(a.isZero())return n.create(0,0);var b=this.dot(a)/a.dot(a);return n.create(a.x*b,a.y*b)},statics:{create:function(a,b){var c=k.create(n);c.x=a;c.y=
b;return c},min:function(a,b){var c=n.read(arguments);_point2=n.read(arguments);return n.create(Math.min(c.x,_point2.x),Math.min(c.y,_point2.y))},max:function(a,b){var c=n.read(arguments);_point2=n.read(arguments);return n.create(Math.max(c.x,_point2.x),Math.max(c.y,_point2.y))},random:function(){return n.create(Math.random(),Math.random())}}},new function(){return k.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return n.create(b(this.x),b(this.y))}},{})}),oa=n.extend({set:function(a,
b,c){this._x=a;this._y=b;if(!c)this._owner[this._setter](this);return this},getX:function(){return this._x},setX:function(a){this._x=a;this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a;this._owner[this._setter](this)},statics:{create:function(a,b,c,d,e){if(e)return n.create(c,d);e=k.create(oa);e._x=c;e._y=d;e._owner=a;e._setter=b;return e}}}),v=this.Size=k.extend({_readIndex:!0,initialize:function(a,b){var c=typeof a;"number"===c?(c="number"===typeof b,this.width=
a,this.height=c?b:a,this._read&&(this._read=c?2:1)):"undefined"===c||null===a?(this.width=this.height=0,this._read&&(this._read=null===a?1:0)):(Array.isArray(a)?(this.width=a[0],this.height=1<a.length?a[1]:a[0]):null!=a.width?(this.width=a.width,this.height=a.height):null!=a.x?(this.width=a.x,this.height=a.y):(this.width=this.height=0,this._read&&(this._read=0)),this._read&&(this._read=1))},toString:function(){var a=k.formatFloat;return"{ width: "+a(this.width)+", height: "+a(this.height)+" }"},set:function(a,
b){this.width=a;this.height=b;return this},clone:function(){return v.create(this.width,this.height)},add:function(a){a=v.read(arguments);return v.create(this.width+a.width,this.height+a.height)},subtract:function(a){a=v.read(arguments);return v.create(this.width-a.width,this.height-a.height)},multiply:function(a){a=v.read(arguments);return v.create(this.width*a.width,this.height*a.height)},divide:function(a){a=v.read(arguments);return v.create(this.width/a.width,this.height/a.height)},modulo:function(a){a=
v.read(arguments);return v.create(this.width%a.width,this.height%a.height)},negate:function(){return v.create(-this.width,-this.height)},equals:function(a){a=v.read(arguments);return this.width==a.width&&this.height==a.height},isZero:function(){return L.isZero(this.width)&&L.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{create:function(a,b){return k.create(v).set(a,b)},min:function(a,b){return v.create(Math.min(a.width,b.width),Math.min(a.height,b.height))},
max:function(a,b){return v.create(Math.max(a.width,b.width),Math.max(a.height,b.height))},random:function(){return v.create(Math.random(),Math.random())}}},new function(){return k.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return v.create(b(this.width),b(this.height))}},{})}),gb=v.extend({set:function(a,b,c){this._width=a;this._height=b;if(!c)this._owner[this._setter](this);return this},getWidth:function(){return this._width},setWidth:function(a){this._width=
a;this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a;this._owner[this._setter](this)},statics:{create:function(a,b,c,d,e){if(e)return v.create(c,d);e=k.create(gb);e._width=c;e._height=d;e._owner=a;e._setter=b;return e}}}),x=this.Rectangle=k.extend({_readIndex:!0,initialize:function(a,b,c,d){var e=typeof a;if("number"===e)this.x=a,this.y=b,this.width=c,this.height=d,this._read&&(this._read=4);else if("undefined"===e||null===a)this.x=this.y=
this.width=this.height=0,this._read&&(this._read=null===a?1:0);else{var f=arguments,e=null;1==arguments.length&&(f=null,Array.isArray(a)?(this.x=a[0],this.y=a[1],this.width=a[2],this.height=a[3]):a.size?(f=[n.read([a.point]),v.read([a.size])],a.center&&(e=n.read([a.center]))):(this.x=a.x||0,this.y=a.y||0,this.width=a.width||0,this.height=a.height||0),this._read&&(this._read=1));if(f&&1<f.length){var g=n.read(f),h=k.peek(f);this.x=g.x;this.y=g.y;h&&void 0!==h.x?(f=n.read(f),this.width=f.x-g.x,this.height=
f.y-g.y,0>this.width&&(this.x=f.x,this.width=-this.width),0>this.height&&(this.y=f.y,this.height=-this.height)):(g=v.read(f),this.width=g.width,this.height=g.height);this._read&&(this._read=arguments._index)}e&&this.setCenter(e)}},set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d;return this},getPoint:function(a){return oa.create(this,"setPoint",this.x,this.y,a)},setPoint:function(a){a=n.read(arguments);this.x=a.x;this.y=a.y;return this},getSize:function(a){return gb.create(this,
"setSize",this.width,this.height,a)},setSize:function(a){a=v.read(arguments);this.width=a.width;this.height=a.height;return this},getLeft:function(){return this.x},setLeft:function(a){this.width-=a-this.x;this.x=a;return this},getTop:function(){return this.y},setTop:function(a){this.height-=a-this.y;this.y=a;return this},getRight:function(){return this.x+this.width},setRight:function(a){this.width=a-this.x;return this},getBottom:function(){return this.y+this.height},setBottom:function(a){this.height=
a-this.y;return this},getCenterX:function(){return this.x+0.5*this.width},setCenterX:function(a){this.x=a-0.5*this.width;return this},getCenterY:function(){return this.y+0.5*this.height},setCenterY:function(a){this.y=a-0.5*this.height;return this},getCenter:function(a){return oa.create(this,"setCenter",this.getCenterX(),this.getCenterY(),a)},setCenter:function(a){a=n.read(arguments);return this.setCenterX(a.x).setCenterY(a.y)},equals:function(a){a=x.read(arguments);return this.x==a.x&&this.y==a.y&&
this.width==a.width&&this.height==a.height},isEmpty:function(){return 0==this.width||0==this.height},toString:function(){var a=k.formatFloat;return"{ x: "+a(this.x)+", y: "+a(this.y)+", width: "+a(this.width)+", height: "+a(this.height)+" }"},contains:function(a){return a&&void 0!==a.width||4==(Array.isArray(a)?a:arguments).length?this._containsRectangle(x.read(arguments)):this._containsPoint(n.read(arguments))},_containsPoint:function(a){var b=a.x,a=a.y;return b>=this.x&&a>=this.y&&b<=this.x+this.width&&
a<=this.y+this.height},_containsRectangle:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b+a.width<=this.x+this.width&&c+a.height<=this.y+this.height},intersects:function(a){a=x.read(arguments);return a.x+a.width>this.x&&a.y+a.height>this.y&&a.x<this.x+this.width&&a.y<this.y+this.height},intersect:function(a){var a=x.read(arguments),b=Math.max(this.x,a.x),c=Math.max(this.y,a.y),d=Math.min(this.x+this.width,a.x+a.width),e=Math.min(this.y+this.height,a.y+a.height);return x.create(b,c,d-b,
e-c)},unite:function(a){var a=x.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x+a.width),e=Math.max(this.y+this.height,a.y+a.height);return x.create(b,c,d-b,e-c)},include:function(a){var a=n.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x),e=Math.max(this.y+this.height,a.y);return x.create(b,c,d-b,e-c)},expand:function(a,b){void 0===b&&(b=a);return x.create(this.x-a/2,this.y-b/2,this.width+a,this.height+
b)},scale:function(a,b){return this.expand(this.width*a-this.width,this.height*(void 0===b?a:b)-this.height)},statics:{create:function(a,b,c,d){return k.create(x).set(a,b,c,d)}}},new function(){return k.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,b){var c=a.join(""),d=/^[RL]/.test(c);4<=b&&(a[1]+=d?"Y":"X");var e=a[d?0:1],d=a[d?1:0],f="get"+e,g="get"+d,h="set"+e,j="set"+d,p="set"+c;
this["get"+c]=function(a){return oa.create(this,p,this[f](),this[g](),a)};this[p]=function(a){a=n.read(arguments);return this[h](a.x)[j](a.y)}},{})}),Rb=x.extend({set:function(a,b,c,d,e){this._x=a;this._y=b;this._width=c;this._height=d;if(!e)this._owner[this._setter](this);return this},statics:{create:function(a,b,c,d,e,f){c=k.create(Rb).set(c,d,e,f,!0);c._owner=a;c._setter=b;return c}}},new function(){var a=x.prototype;return k.each(["x","y","width","height"],function(a){var c=k.capitalize(a),d=
"_"+a;this["get"+c]=function(){return this[d]};this["set"+c]=function(a){this[d]=a;if(!this._dontNotify)this._owner[this._setter](this)}},k.each("Point Size Center Left Top Right Bottom CenterX CenterY TopLeft TopRight BottomLeft BottomRight LeftCenter TopCenter RightCenter BottomCenter".split(" "),function(b){var c="set"+b;this[c]=function(b){this._dontNotify=!0;a[c].apply(this,arguments);delete this._dontNotify;this._owner[this._setter](this);return this}},{}))}),K=this.Matrix=k.extend({_type:"matrix",
initialize:function(a){var b=arguments.length,c=!0;6==b?this.set.apply(this,arguments):1==b?a instanceof K?this.set(a._a,a._c,a._b,a._d,a._tx,a._ty):Array.isArray(a)?this.set.apply(this,a):c=!1:0==b?this.setIdentity():c=!1;if(!c)throw Error("Unsupported matrix parameters");},_serialize:function(){return this.getValues()},clone:function(){return K.create(this._a,this._c,this._b,this._d,this._tx,this._ty)},set:function(a,b,c,d,e,f){this._a=a;this._c=b;this._b=c;this._d=d;this._tx=e;this._ty=f;return this},
setIdentity:function(){this._a=this._d=1;this._c=this._b=this._tx=this._ty=0;return this},scale:function(a,b){var c=n.read(arguments),d=n.read(arguments);d&&this.translate(d);this._a*=c.x;this._c*=c.x;this._b*=c.y;this._d*=c.y;d&&this.translate(d.negate());return this},translate:function(a){var a=n.read(arguments),b=a.x,c=a.y;this._tx+=b*this._a+c*this._b;this._ty+=b*this._c+c*this._d;return this},rotate:function(a,b){return this.concatenate(K.getRotateInstance.apply(K,arguments))},shear:function(a,
b){var c=n.read(arguments),d=n.read(arguments);d&&this.translate(d);var e=this._a,f=this._c;this._a+=c.y*this._b;this._c+=c.y*this._d;this._b+=c.x*e;this._d+=c.x*f;d&&this.translate(d.negate());return this},toString:function(){var a=k.formatFloat;return"[["+[a(this._a),a(this._b),a(this._tx)].join(", ")+"], ["+[a(this._c),a(this._d),a(this._ty)].join(", ")+"]]"},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},concatenate:function(a){var b=this._a,c=this._b,d=this._c,
e=this._d;this._a=a._a*b+a._c*c;this._b=a._b*b+a._d*c;this._c=a._a*d+a._c*e;this._d=a._b*d+a._d*e;this._tx+=a._tx*b+a._ty*c;this._ty+=a._tx*d+a._ty*e;return this},preConcatenate:function(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=this._tx,g=this._ty;this._a=a._a*b+a._b*d;this._b=a._a*c+a._b*e;this._c=a._c*b+a._d*d;this._d=a._c*c+a._d*e;this._tx=a._a*f+a._b*g+a._tx;this._ty=a._c*f+a._d*g+a._ty;return this},transform:function(a,b,c,d,e){return 5>arguments.length?this._transformPoint(n.read(arguments)):
this._transformCoordinates(a,b,c,d,e)},_transformPoint:function(a,b,c){var d=a.x,a=a.y;b||(b=k.create(n));return b.set(d*this._a+a*this._b+this._tx,d*this._c+a*this._d+this._ty,c)},_transformCoordinates:function(a,b,c,d,e){for(var f=b,b=b+2*e;f<b;){var e=a[f++],g=a[f++];c[d++]=e*this._a+g*this._b+this._tx;c[d++]=e*this._c+g*this._d+this._ty}return c},_transformCorners:function(a){var b=a.x,c=a.y,d=b+a.width,a=c+a.height,b=[b,c,d,c,d,a,b,a];return this._transformCoordinates(b,0,b,0,4)},_transformBounds:function(a,
b,c){for(var a=this._transformCorners(a),d=a.slice(0,2),e=a.slice(0),f=2;8>f;f++){var g=a[f],h=f&1;g<d[h]?d[h]=g:g>e[h]&&(e[h]=g)}b||(b=k.create(x));return b.set(d[0],d[1],e[0]-d[0],e[1]-d[1],c)},inverseTransform:function(a){return this._inverseTransform(n.read(arguments))},_getDeterminant:function(){var a=this._a*this._d-this._b*this._c;return isFinite(a)&&!L.isZero(a)&&isFinite(this._tx)&&isFinite(this._ty)?a:null},_inverseTransform:function(a,b,c){var d=this._getDeterminant();if(!d)return null;
var e=a.x-this._tx,a=a.y-this._ty;b||(b=k.create(n));return b.set((e*this._d-a*this._b)/d,(a*this._a-e*this._c)/d,c)},getTranslation:function(){return n.create(this._tx,this._ty)},getScaling:function(){var a=Math.sqrt(this._a*this._a+this._c*this._c),b=Math.sqrt(this._b*this._b+this._d*this._d);return n.create(0>this._a?-a:a,0>this._b?-b:b)},getRotation:function(){var a=-Math.atan2(this._b,this._d),b=Math.atan2(this._c,this._a);return 1E-11>Math.abs(a-b)?180*a/Math.PI:void 0},equals:function(a){return a&&
this._a==a._a&&this._b==a._b&&this._c==a._c&&this._d==a._d&&this._tx==a._tx&&this._ty==a._ty},isIdentity:function(){return 1==this._a&&0==this._c&&0==this._b&&1==this._d&&0==this._tx&&0==this._ty},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},createInverse:function(){var a=this._getDeterminant();return a&&K.create(this._d/a,-this._c/a,-this._b/a,this._a/a,(this._b*this._ty-this._d*this._tx)/a,(this._c*this._tx-this._a*this._ty)/a)},createShiftless:function(){return K.create(this._a,
this._c,this._b,this._d,0,0)},setToScale:function(a,b){return this.set(a,0,0,b,0,0)},setToTranslation:function(a){a=n.read(arguments);return this.set(1,0,0,1,a.x,a.y)},setToShear:function(a,b){return this.set(1,b,a,1,0,0)},setToRotation:function(a,b){var b=n.read(arguments,1),a=a*Math.PI/180,c=b.x,d=b.y,e=Math.cos(a),f=Math.sin(a);return this.set(e,f,-f,e,c-c*e+d*f,d-c*f-d*e)},applyToContext:function(a,b){a[b?"setTransform":"transform"](this._a,this._c,this._b,this._d,this._tx,this._ty);return this},
statics:{create:function(a,b,c,d,e,f){return k.create(K).set(a,b,c,d,e,f)},getScaleInstance:function(a,b){var c=new K;return c.setToScale.apply(c,arguments)},getTranslateInstance:function(a){var b=new K;return b.setToTranslation.apply(b,arguments)},getShearInstance:function(a,b,c){var d=new K;return d.setToShear.apply(d,arguments)},getRotateInstance:function(a,b){var c=new K;return c.setToRotation.apply(c,arguments)}}},new function(){return k.each({scaleX:"_a",scaleY:"_d",translateX:"_tx",translateY:"_ty",
shearX:"_b",shearY:"_c"},function(a,b){b=k.capitalize(b);this["get"+b]=function(){return this[a]};this["set"+b]=function(b){this[a]=b}},{})}),Y=this.Line=k.extend({initialize:function(a,b,c){var d=n.read(arguments),e=n.read(arguments),f=k.read(arguments);void 0!==f?(this.point=d,this.vector=e.subtract(d),this.infinite=f):(this.point=d,this.vector=e,this.infinite=!0)},intersect:function(a){var b=this.vector.cross(a.vector);if(L.isZero(b))return null;var c=a.point.subtract(this.point),d=c.cross(a.vector)/
b,b=c.cross(this.vector)/b;return(this.infinite||0<=d&&1>=d)&&(a.infinite||0<=b&&1>=b)?this.point.add(this.vector.multiply(d)):null},getSide:function(a){var b=this.vector,a=a.subtract(this.point),c=a.cross(b);0===c&&(c=a.dot(b),0<c&&(c=a.subtract(b).dot(b),0>c&&(c=0)));return 0>c?-1:0<c?1:0},getDistance:function(a){var b=this.vector.y/this.vector.x,b=Math.abs(a.y-b*a.x-(this.point.y-b*this.point.x))/Math.sqrt(b*b+1);return this.infinite?b:Math.min(b,a.getDistance(this.point),a.getDistance(this.point.add(this.vector)))}}),
fb=this.Project=Qb.extend({_list:"projects",_reference:"project",initialize:function(a){this.base(!0);this.layers=[];this.symbols=[];this.activeLayer=new za;a&&(this.view=a instanceof H?a:H.create(a));this._currentStyle=new Oa;this._selectedItems={};this._selectedItemCount=0},_needsRedraw:function(){this.view&&(this.view._redrawNeeded=!0)},remove:function(){if(!this.base())return!1;this.view&&this.view.remove();return!0},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.initialize(a)},
getIndex:function(){return this._index},getSelectedItems:function(){var a=[];k.each(this._selectedItems,function(b){a.push(b)});return a},_updateSelection:function(a){a._selected?(this._selectedItemCount++,this._selectedItems[a._id]=a):(this._selectedItemCount--,delete this._selectedItems[a._id])},selectAll:function(){for(var a=0,b=this.layers.length;a<b;a++)this.layers[a].setSelected(!0)},deselectAll:function(){for(var a in this._selectedItems)this._selectedItems[a].setSelected(!1)},hitTest:function(a,
b){for(var a=n.read(arguments),b=HitResult.getOptions(k.read(arguments)),c=this.layers.length-1;0<=c;c--){var d=this.layers[c].hitTest(a,b);if(d)return d}return null},draw:function(a,b){a.save();b.isIdentity()||b.applyToContext(a);for(var c={offset:new n(0,0)},d=0,e=this.layers.length;d<e;d++)O.draw(this.layers[d],a,c);a.restore();if(0<this._selectedItemCount){a.save();a.strokeWidth=1;a.strokeStyle=a.fillStyle="#009dec";var f={},g=function(a,b,c){var d=c&&f[a._id];if(d)return d.clone();a._parent&&
(b=g(a._parent,b,!0));a._matrix.isIdentity()||b.concatenate(a._matrix);c&&(f[a._id]=b.clone());return b},h;for(h in this._selectedItems)c=this._selectedItems[h],c.drawSelected(a,g(c,b.clone()));a.restore()}}}),la=this.Symbol=k.extend({initialize:function(a){this.project=paper.project;this.project.symbols.push(this);this.setDefinition(a);this._instances={}},_changed:function(a){k.each(this._instances,function(b){b._changed(a)})},getDefinition:function(){return this._definition},setDefinition:function(a){a._parentSymbol&&
(a=a.clone());this._definition&&delete this._definition._parentSymbol;this._definition=a;a.remove();a.setPosition(new n);a._parentSymbol=this;this._changed(5)},place:function(a){return new Sb(this,a)},clone:function(){return new la(this._definition.clone())}}),O=this.Item=k.extend(wa,{_serializeFields:{name:null,children:[],matrix:new K},initialize:function(a){this._id=++O._id;this._project||paper.project.activeLayer.addChild(this);this._style||(this._style=Oa.create(this));this.setStyle(this._project.getCurrentStyle());
this._matrix=new K;a&&this._matrix.translate(a)},_events:new function(){var a={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},b={install:function(b){var d=this._project.view._eventCounters;if(d)for(var e in a)d[e]=(d[e]||0)+(a[e][b]||0)},uninstall:function(b){var d=this._project.view._eventCounters;if(d)for(var e in a)d[e]-=a[e][b]||0}};return k.each("onMouseDown onMouseUp onMouseDrag onClick onDoubleClick onMouseMove onMouseEnter onMouseLeave".split(" "),
function(a){this[a]=b},{onFrame:{install:function(){this._project.view._animateItem(this,!0)},uninstall:function(){this._project.view._animateItem(this,!1)}},onLoad:{}})},_setProperties:function(a){if(k.isPlainObject(a))return this.set(a)},set:function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},_serialize:function(){function a(a){for(var e in a){var f=c[e];k.equals(f,a[e])||(b[e]=k.serialize(f))}}var b={},c=this;a(this._serializeFields);a(this._style._defaults);return[this._type,
b]},_changed:function(a){a&4&&(delete this._bounds,delete this._position);this._parent&&a&12&&this._parent._clearBoundsCache();a&2&&this._clearBoundsCache();a&1&&this._project._needsRedraw();this._parentSymbol&&this._parentSymbol._changed(a);if(this._project._changes){var b=this._project._changesById[this._id];b?b.flags|=a:(b={item:this,flags:a},this._project._changesById[this._id]=b,this._project._changes.push(b))}},getId:function(){return this._id},getType:function(){return this._type},getName:function(){return this._name},
setName:function(a){this._name&&this._removeFromNamed();this._name=a||void 0;if(a&&this._parent){var b=this._parent._children,c=this._parent._namedChildren;(c[a]=c[a]||[]).push(this);b[a]=this}this._changed(32)},statics:{_id:0}},k.each(["locked","visible","blendMode","opacity","guide"],function(a){var b=k.capitalize(a),a="_"+a;this["get"+b]=function(){return this[a]};this["set"+b]=function(b){b!=this[a]&&(this[a]=b,this._changed("_locked"===a?32:33))}},{}),{_locked:!1,_visible:!0,_blendMode:"normal",
_opacity:1,_guide:!1,applyMatrix:!1,isSelected:function(){if(this._children)for(var a=0,b=this._children.length;a<b;a++)if(this._children[a].isSelected())return!0;return this._selected},setSelected:function(a,b){if(this._children&&!b)for(var c=0,d=this._children.length;c<d;c++)this._children[c].setSelected(a);else if((a=!!a)!=this._selected)this._selected=a,this._project._updateSelection(this),this._changed(33)},_selected:!1,isFullySelected:function(){if(this._children&&this._selected){for(var a=
0,b=this._children.length;a<b;a++)if(!this._children[a].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(a){if(this._children)for(var b=0,c=this._children.length;b<c;b++)this._children[b].setFullySelected(a);this.setSelected(a,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(a){if(this._clipMask!=(a=!!a)){if(this._clipMask=a)this.setFillColor(null),this.setStrokeColor(null);this._changed(33);this._parent&&this._parent._changed(256)}},_clipMask:!1,
getPosition:function(a){var b=this._position||(this._position=this.getBounds().getCenter(!0));return a?b:oa.create(this,"setPosition",b.x,b.y)},setPosition:function(a){this.translate(n.read(arguments).subtract(this.getPosition(!0)))},getMatrix:function(){return this._matrix},setMatrix:function(a){this._matrix.initialize(a);this._changed(5)},isEmpty:function(){return!0}},k.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(a){this[a]=function(b){var c=this._boundsGetter,
b=this._getCachedBounds("string"==typeof c?c:c&&c[a]||a,b);return"bounds"==a?Rb.create(this,"setBounds",b.x,b.y,b.width,b.height):b}},{_getCachedBounds:function(a,b,c){var d=(!b||b.equals(this._matrix))&&a;if(c&&this._parent){var e=c._id,f=this._parent._boundsCache=this._parent._boundsCache||{ids:{},list:[]};f.ids[e]||(f.list.push(c),f.ids[e]=c)}if(d&&this._bounds&&this._bounds[d])return this._bounds[d];e=this._matrix.isIdentity();b=!b||b.isIdentity()?e?null:this._matrix:e?b:b.clone().concatenate(this._matrix);
a=this._getBounds(a,b,d?this:c);d&&(this._bounds||(this._bounds={}),this._bounds[d]=a.clone());return a},_clearBoundsCache:function(){if(this._boundsCache){for(var a=0,b=this._boundsCache.list,c=b.length;a<c;a++){var d=b[a];delete d._bounds;d!=this&&d._boundsCache&&d._clearBoundsCache()}delete this._boundsCache}},_getBounds:function(a,b,c){var d=this._children;if(!d||0==d.length)return new x;for(var e=Infinity,f=-e,g=e,h=f,j=0,p=d.length;j<p;j++){var m=d[j];m._visible&&!m.isEmpty()&&(m=m._getCachedBounds(a,
b,c),e=Math.min(m.x,e),g=Math.min(m.y,g),f=Math.max(m.x+m.width,f),h=Math.max(m.y+m.height,h))}return x.create(e,g,f-e,h-g)},setBounds:function(a){var a=x.read(arguments),b=this.getBounds(),c=new K,d=a.getCenter();c.translate(d);if(a.width!=b.width||a.height!=b.height)c.scale(0!=b.width?a.width/b.width:1,0!=b.height?a.height/b.height:1);d=b.getCenter();c.translate(-d.x,-d.y);this.transform(c)}}),{getProject:function(){return this._project},_setProject:function(a){if(this._project!=a&&(this._project=
a,this._children))for(var b=0,c=this._children.length;b<c;b++)this._children[b]._setProject(a)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof za)return a;return null},getParent:function(){return this._parent},getChildren:function(){return this._children},setChildren:function(a){this.removeChildren();this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||
null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},clone:function(){return this._clone(new this.constructor)},_clone:function(a){a.setStyle(this._style);if(this._children)for(var b=0,c=this._children.length;b<c;b++)a.addChild(this._children[b].clone(),!0);for(var d="_locked _visible _blendMode _opacity _clipMask _guide applyMatrix".split(" "),
b=0,c=d.length;b<c;b++){var e=d[b];this.hasOwnProperty(e)&&(a[e]=this[e])}a._matrix.initialize(this._matrix);a.setSelected(this._selected);this._name&&a.setName(this._name);return a},copyTo:function(a){var b=this.clone();a.layers?a.activeLayer.addChild(b):a.addChild(b);return b},rasterize:function(a){var b=this.getStrokeBounds(),a=(a||72)/72,c=W.getCanvas(b.getSize().multiply(a)),d=c.getContext("2d");(new K).scale(a).translate(-b.x,-b.y).applyToContext(d);this.draw(d,{});a=new Aa(c);a.setBounds(b);
return a},hitTest:function(a,b){a=n.read(arguments);b=HitResult.getOptions(k.read(arguments));if(!this._children&&!this.getRoughBounds().expand(b.tolerance)._containsPoint(a))return null;a=this._matrix._inverseTransform(a);if((b.center||b.bounds)&&(!(this instanceof za)||this._parent)){var c=this.getBounds(),d=this,e="TopLeft TopRight BottomLeft BottomRight LeftCenter TopCenter RightCenter BottomCenter".split(" "),f,g=function(e,g){var f=c["get"+g]();if(a.getDistance(f)<b.tolerance)return new HitResult(e,
d,{name:k.hyphenate(g),point:f})};if(b.center&&(f=g("center","Center")))return f;if(b.bounds)for(var h=0;8>h;h++)if(f=g("bounds",e[h]))return f}return this._children||!(b.guides&&!this._guide||b.selected&&!this._selected)?this._hitTest(a,b):null},_hitTest:function(a,b){if(this._children)for(var c=this._children.length-1;0<=c;c--){var d=this._children[c].hitTest(a,b);if(d)return d}},addChild:function(a,b){return this.insertChild(void 0,a,b)},insertChild:function(a,b){return this._children?(b._remove(!1,
!0),k.splice(this._children,[b],a,0),b._parent=this,b._setProject(this._project),b._name&&b.setName(b._name),this._changed(3),b):null},addChildren:function(a){return this.insertChildren(this._children.length,a)},insertChildren:function(a,b){for(var b=b&&Array.prototype.slice.apply(b),c=a,d=0,e=b&&b.length;d<e;d++)this.insertChild(c,b[d])&&c++;return c!=a},insertAbove:function(a){var b=a._index;a._parent==this._parent&&b<this._index&&b++;return a._parent.insertChild(b,this)},insertBelow:function(a){var b=
a._index;a._parent==this._parent&&b>this._index&&b--;return a._parent.insertChild(b,this)},appendTop:function(a){return this.addChild(a)},appendBottom:function(a){return this.insertChild(0,a)},moveAbove:function(a){return this.insertAbove(a)},moveBelow:function(a){return this.insertBelow(a)},_removeFromNamed:function(){var a=this._parent._children,b=this._parent._namedChildren,c=this._name,d=b[c],e=d?d.indexOf(this):-1;-1!=e&&(a[c]==this&&delete a[c],d.splice(e,1),d.length?a[c]=d[d.length-1]:delete b[c])},
_remove:function(a,b){return this._parent?(a&&this.setSelected(!1),this._name&&this._removeFromNamed(),null!=this._index&&k.splice(this._parent._children,null,this._index,1),b&&this._parent._changed(3),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},removeChildren:function(a,b){if(!this._children)return null;for(var a=a||0,b=k.pick(b,this._children.length),c=k.splice(this._children,null,a,b-a),d=c.length-1;0<=d;d--)c[d]._remove(!0,!1);0<c.length&&this._changed(3);return c},
reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,b=this._children.length;a<b;a++)this._children[a]._index=a;this._changed(3)}},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},_getOrder:function(a){function b(a){var b=[];do b.unshift(a);while(a=a._parent);return b}for(var c=b(this),a=b(a),d=0,e=Math.min(c.length,a.length);d<e;d++)if(c[d]!=a[d])return c[d]._index<a[d]._index?1:-1;return 0},hasChildren:function(){return this._children&&
0<this._children.length},isAbove:function(a){return-1==this._getOrder(a)},isBelow:function(a){return 1==this._getOrder(a)},isParent:function(a){return this._parent==a},isChild:function(a){return a&&a._parent==this},isDescendant:function(a){for(var b=this;b=b._parent;)if(b==a)return!0;return!1},isAncestor:function(a){return a?a.isDescendant(this):!1},isGroupedWith:function(a){for(var b=this._parent;b;){if(b._parent&&(b instanceof ma||b instanceof Ba)&&a.isDescendant(b))return!0;b=b._parent}return!1},
scale:function(a,b,c){if(2>arguments.length||"object"===typeof b)c=b,b=a;return this.transform((new K).scale(a,b,c||this.getPosition(!0)))},translate:function(a){var b=new K;return this.transform(b.translate.apply(b,arguments))},rotate:function(a,b){return this.transform((new K).rotate(a,b||this.getPosition(!0)))},shear:function(a,b,c){if(2>arguments.length||"object"===typeof b)c=b,b=a;return this.transform((new K).shear(a,b,c||this.getPosition(!0)))},transform:function(a,b){var c=this._bounds,d=
this._position;this._matrix.preConcatenate(a);this._transform&&this._transform(a);(this.applyMatrix||b)&&this._applyMatrix(this._matrix)&&this._matrix.setIdentity();this._changed(5);if(c&&0===a.getRotation()%90){for(var e in c)d=c[e],a._transformBounds(d,d);e=this._boundsGetter;if(d=c[e&&e.getBounds||e||"getBounds"])this._position=d.getCenter(!0);this._bounds=c}else d&&(this._position=a._transformPoint(d,d));return this},_applyMatrix:function(a){if(this._children){for(var b=0,c=this._children.length;b<
c;b++)this._children[b].transform(a,!0);return!0}},fitBounds:function(a,b){var a=x.read(arguments),c=this.getBounds(),d=c.height/c.width,e=a.height/a.width,d=(b?d>e:d<e)?a.width/c.width:a.height/c.height,c=new x(new n,v.create(c.width*d,c.height*d));c.setCenter(a.getCenter());this.setBounds(c)},toString:function(){return(this.constructor._name||"Item")+(this._name?" '"+this._name+"'":" @"+this._id)},_setStyles:function(a){var b=this._style,c=b._strokeWidth,d=b._strokeJoin,e=b._strokeCap,f=b._miterLimit,
g=b._fillColor,b=b._strokeColor;null!=c&&(a.lineWidth=c);d&&(a.lineJoin=d);e&&(a.lineCap=e);f&&(a.miterLimit=f);g&&(a.fillStyle=g.getCanvasStyle(a));b&&(a.strokeStyle=b.getCanvasStyle(a));if(!g||!b)a.globalAlpha=this._opacity},statics:{drawSelectedBounds:function(a,b,c){a=c._transformCorners(a);b.beginPath();for(c=0;8>c;c++)b[0==c?"moveTo":"lineTo"](a[c],a[++c]);b.closePath();b.stroke();for(c=0;8>c;c++)b.beginPath(),b.rect(a[c]-2,a[++c]-2,4,4),b.fill()},draw:function(a,b,c){if(a._visible&&0!=a._opacity){var d,
e,f,g;if("normal"!==a._blendMode||1>a._opacity&&("path"!==a._type||a.getFillColor()&&a.getStrokeColor())){d=a.getStrokeBounds();if(!d.width||!d.height)return;g=c.offset;e=b;f=c.offset=d.getTopLeft().floor();d=W.getCanvas(d.getSize().ceil().add(v.create(1,1)));b=d.getContext("2d")}c.clipping||b.save();d&&b.translate(-f.x,-f.y);a._matrix.applyToContext(b);a.draw(b,c);c.clipping||b.restore();d&&(c.offset=g,"normal"!==a._blendMode?Kc.process(a._blendMode,b,e,a._opacity,f.subtract(g)):(e.save(),e.globalAlpha=
a._opacity,e.drawImage(d,f.x,f.y),e.restore()),W.returnCanvas(d))}}}},k.each(["down","drag","up","move"],function(a){this["removeOn"+k.capitalize(a)]=function(){var b={};b[a]=!0;return this.removeOn(b)}},{removeOn:function(a){for(var b in a)if(a[b]){var c="mouse"+b,d=ya._removeSets=ya._removeSets||{};d[c]=d[c]||{};d[c][this._id]=this}return this}})),ma=this.Group=O.extend({_type:"group",initialize:function(a){this.base();this._children=[];this._namedChildren={};this._setProperties(a)||this.addChildren(Array.isArray(a)?
a:arguments)},_changed:function(a){O.prototype._changed.call(this,a);a&258&&delete this._clipItem},_getClipItem:function(){if(void 0!==this._clipItem)return this._clipItem;for(var a=0,b=this._children.length;a<b;a++){var c=this._children[a];if(c._clipMask)return this._clipItem=c}return this._clipItem=null},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var b=this.getFirstChild();b&&b.setClipMask(a);return this},isEmpty:function(){return 0==this._children.length},draw:function(a,
b){var c=this._getClipItem();c&&(b.clipping=!0,O.draw(c,a,b),delete b.clipping);for(var d=0,e=this._children.length;d<e;d++){var f=this._children[d];f!=c&&O.draw(f,a,b)}}}),za=this.Layer=ma.extend({_type:"layer",initialize:function(a){this._project=paper.project;this._index=this._project.layers.push(this)-1;this.base.apply(this,arguments);this.activate()},_remove:function(a,b){return this._parent?this.base(a,b):null!=this._index?(a&&this.setSelected(!1),k.splice(this._project.layers,null,this._index,
1),this._project._needsRedraw(),!0):!1},getNextSibling:function(){return this._parent?this.base():this._project.layers[this._index+1]||null},getPreviousSibling:function(){return this._parent?this.base():this._project.layers[this._index-1]||null},activate:function(){this._project.activeLayer=this}},new function(){function a(a){return function(c){return c instanceof za&&!c._parent&&this._remove(!1,!0)?(k.splice(c._project.layers,[this],c._index+(a?1:0),0),this._setProject(c._project),!0):this.base(c)}}
return{insertAbove:a(!0),insertBelow:a(!1)}}),Tb=this.PlacedItem=O.extend({_boundsGetter:{getBounds:"getStrokeBounds"},_hitTest:function(a,b,c){if(a=this._symbol._definition._hitTest(a,b,c))a.item=this;return a}}),Aa=this.Raster=Tb.extend({_type:"raster",_boundsGetter:"getBounds",initialize:function(a,b){this.base(void 0!==b&&n.read(arguments,1));this._setProperties(a)||(a.getContext?this.setCanvas(a):"string"===typeof a?this.setSource(a):this.setImage(a))},clone:function(){var a=this._image;a||(a=
W.getCanvas(this._size),a.getContext("2d").drawImage(this._canvas,0,0));a=new Aa(a);return this._clone(a)},getSize:function(){return this._size},setSize:function(){var a=v.read(arguments);if(!this._size.equals(a)){var b=this.getImage();this.setCanvas(W.getCanvas(a));this.getContext(!0).drawImage(b,0,0,a.width,a.height)}},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},isEmpty:function(){return 0==this._size.width&&0==this._size.height},getPpi:function(){var a=
this._matrix,b=(new n(0,0)).transform(a),c=(new n(1,0)).transform(a).subtract(b),a=(new n(0,1)).transform(a).subtract(b);return v.create(72/c.getLength(),72/a.getLength())},getContext:function(a){this._context||(this._context=this.getCanvas().getContext("2d"));a&&this._changed(129);return this._context},setContext:function(a){this._context=a},getCanvas:function(){this._canvas||(this._canvas=W.getCanvas(this._size),this._image&&this.getContext(!0).drawImage(this._image,0,0));return this._canvas},setCanvas:function(a){this._canvas&&
W.returnCanvas(this._canvas);this._canvas=a;this._size=v.create(a.width,a.height);this._context=this._image=null;this._changed(133)},getImage:function(){return this._image||this.getCanvas()},setImage:function(a){this._canvas&&W.returnCanvas(this._canvas);this._image=a;this._size=v.create(a.naturalWidth,a.naturalHeight);this._context=this._canvas=null;this._changed(5)},getSource:function(){return this.getImage().src},setSource:function(a){var b=this,c=document.getElementById(a)||new Image;I.add(c,
{load:function(){b.setImage(c);b.fire("load");b._project.view&&b._project.view.draw(!0)}});c.src||(c.src=a);this.setImage(c)},getSubImage:function(a){var a=x.read(arguments),b=W.getCanvas(a.getSize());b.getContext("2d").drawImage(this.getCanvas(),a.x,a.y,b.width,b.height,0,0,b.width,b.height);return b},drawImage:function(a,b){b=n.read(arguments,1);this.getContext(!0).drawImage(a,b.x,b.y)},getAverageColor:function(a){var b,c;a?a instanceof hb?(c=a,b=a.getBounds()):a.width?b=new x(a):a.x&&(b=x.create(a.x-
0.5,a.y-0.5,1,1)):b=this.getBounds();var a=Math.min(b.width,32),d=Math.min(b.height,32),e=Aa._sampleContext;e?e.clearRect(0,0,32,32):e=Aa._sampleContext=W.getCanvas(new v(32)).getContext("2d");e.save();e.scale(a/b.width,d/b.height);e.translate(-b.x,-b.y);c&&c.draw(e,{clip:!0});this._matrix.applyToContext(e);e.drawImage(this._canvas||this._image,-this._size.width/2,-this._size.height/2);e.restore();b=e.getImageData(0.5,0.5,Math.ceil(a),Math.ceil(d)).data;c=[0,0,0];d=a=0;for(e=b.length;d<e;d+=4){var f=
b[d+3],a=a+f,f=f/255;c[0]+=b[d]*f;c[1]+=b[d+1]*f;c[2]+=b[d+2]*f}for(d=0;3>d;d++)c[d]/=a;return a?aa.read(c):null},getPixel:function(a){for(var a=n.read(arguments),b=this.getContext().getImageData(a.x,a.y,1,1).data,c=Array(4),d=0;4>d;d++)c[d]=b[d]/255;return Z.read(c)},setPixel:function(a,b){var c=n.read(arguments),d=aa.read(arguments),e=this.getContext(!0),f=e.createImageData(1,1),g=b.getAlpha();f.data[0]=255*d.getRed();f.data[1]=255*d.getGreen();f.data[2]=255*d.getBlue();f.data[3]=null!=g?255*g:
255;e.putImageData(f,c.x,c.y)},createData:function(a){a=v.read(arguments);return this.getContext().createImageData(a.width,a.height)},getData:function(a){a=x.read(arguments);a.isEmpty()&&(a=new x(this.getSize()));return this.getContext().getImageData(a.x,a.y,a.width,a.height)},setData:function(a,b){b=n.read(arguments,1);this.getContext(!0).putImageData(a,b.x,b.y)},_getBounds:function(a,b){var c=(new x(this._size)).setCenter(0,0);return b?b._transformBounds(c):c},_hitTest:function(a){if(a.isInside(this._getBounds())){var b=
this;return new HitResult("pixel",b,{offset:a.add(b._size.divide(2)).round(),color:{get:function(){return b.getPixel(this.offset)}}})}},draw:function(a){a.drawImage(this._canvas||this._image,-this._size.width/2,-this._size.height/2)},drawSelected:function(a,b){O.drawSelectedBounds((new x(this._size)).setCenter(0,0),a,b)}}),Sb=this.PlacedSymbol=Tb.extend({_type:"placedsymbol",initialize:function(a,b){this.base(void 0!==b&&n.read(arguments,1));this._setProperties(a)||this.setSymbol(a instanceof la?
a:new la(a))},getSymbol:function(){return this._symbol},setSymbol:function(a){this._symbol&&delete this._symbol._instances[this._id];this._symbol=a;a._instances[this._id]=this},isEmpty:function(){return this._symbol._definition.isEmpty()},clone:function(){return this._clone(new Sb(this.symbol,this._matrix.clone()))},_getBounds:function(a,b){return this.symbol._definition._getCachedBounds(a,b)},draw:function(a,b){O.draw(this.symbol._definition,a,b)},drawSelected:function(a,b){O.drawSelectedBounds(this.symbol._definition.getBounds(),
a,b)}});HitResult=k.extend({initialize:function(a,b,c){this.type=a;this.item=b;c&&(c.enumerable=!0,this.inject(c))},statics:{getOptions:function(a){return a&&a._merged?a:k.merge({type:null,tolerance:2,fill:!a,stroke:!a,segments:!a,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1,_merged:!0},a)}}});var u=this.Segment=k.extend({_type:"segment",initialize:function(a,b,c,d,e,f){var g=arguments.length,h=Ub.create,j,p,m;0!=g&&(1==g?a.point?(j=a.point,p=a.handleIn,m=a.handleOut):j=a:6>g?2==g&&
void 0===b.x?j=[a,b]:(j=a,p=b,m=c):6==g&&(j=[a,b],p=[c,d],m=[e,f]));h(this,"_point",j);h(this,"_handleIn",p);h(this,"_handleOut",m)},_serialize:function(){return k.serialize(this._handleIn.isZero()&&this._handleOut.isZero()?this._point:[this._point,this._handleIn,this._handleOut],!0)},_changed:function(a){if(this._path){var b=this._path._curves&&this.getCurve(),c;b&&(b._changed(),(c=b[a==this._point||a==this._handleIn&&b._segment1==this?"getPrevious":"getNext"]())&&c._changed());this._path._changed(5)}},
getPoint:function(){return this._point},setPoint:function(a){a=n.read(arguments);this._point.set(a.x,a.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(a){a=n.read(arguments);this._handleIn.set(a.x,a.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(a){a=n.read(arguments);this._handleOut.set(a.x,a.y)},isLinear:function(){return this._handleIn.isZero()&&this._handleOut.isZero()},_isSelected:function(a){var b=this._selectionState;return a==this._point?!!(b&
4):a==this._handleIn?!!(b&1):a==this._handleOut?!!(b&2):!1},_setSelected:function(a,b){var c=this._path,b=!!b,d=this._selectionState||0,e=[!!(d&4),!!(d&1),!!(d&2)];if(a==this._point){if(b)e[1]=e[2]=!1;else{var f=this.getPrevious(),g=this.getNext();e[1]=f&&(f._point.isSelected()||f._handleOut.isSelected());e[2]=g&&(g._point.isSelected()||g._handleIn.isSelected())}e[0]=b}else f=a==this._handleIn?1:2,e[f]!=b&&(b&&(e[0]=!1),e[f]=b);this._selectionState=(e[0]?4:0)|(e[1]?1:0)|(e[2]?2:0);c&&d!=this._selectionState&&
(c._updateSelection(this,d,this._selectionState),c._changed(33))},isSelected:function(){return this._isSelected(this._point)},setSelected:function(a){this._setSelected(this._point,a)},getIndex:function(){return void 0!==this._index?this._index:null},getPath:function(){return this._path||null},getCurve:function(){if(this._path){var a=this._index;!this._path._closed&&a==this._path._segments.length-1&&a--;return this._path.getCurves()[a]||null}return null},getNext:function(){var a=this._path&&this._path._segments;
return a&&(a[this._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},reverse:function(){return new u(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new u(this._point,this._handleIn,this._handleOut)},equals:function(a){return a==this||a&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&
this._handleOut.equals(a._handleOut)},toString:function(){var a=["point: "+this._point];this._handleIn.isZero()||a.push("handleIn: "+this._handleIn);this._handleOut.isZero()||a.push("handleOut: "+this._handleOut);return"{ "+a.join(", ")+" }"},_transformCoordinates:function(a,b,c){var d=this._point,e=!c||!this._handleIn.isZero()?this._handleIn:null,f=!c||!this._handleOut.isZero()?this._handleOut:null,g=d._x,h=d._y,j=2;b[0]=g;b[1]=h;e&&(b[j++]=e._x+g,b[j++]=e._y+h);f&&(b[j++]=f._x+g,b[j++]=f._y+h);
a&&(a._transformCoordinates(b,0,b,0,j/2),g=b[0],h=b[1],c?(d._x=g,d._y=h,j=2,e&&(e._x=b[j++]-g,e._y=b[j++]-h),f&&(f._x=b[j++]-g,f._y=b[j++]-h)):(e||(b[j++]=g,b[j++]=h),f||(b[j++]=g,b[j++]=h)));return b}}),Ub=n.extend({set:function(a,b){this._x=a;this._y=b;this._owner._changed(this);return this},getX:function(){return this._x},setX:function(a){this._x=a;this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a;this._owner._changed(this)},isZero:function(){return L.isZero(this._x)&&
L.isZero(this._y)},setSelected:function(a){this._owner._setSelected(this,a)},isSelected:function(){return this._owner._isSelected(this)},statics:{create:function(a,b,c){var d=k.create(Ub),e,f,g;if(c)if(void 0!==(e=c[0]))f=c[1];else{if(void 0===(e=c.x))c=n.read(arguments,2),e=c.x;f=c.y;g=c.selected}else e=f=0;d._x=e;d._y=f;d._owner=a;a[b]=d;g&&d.setSelected(!0);return d}}}),y=this.Curve=k.extend({initialize:function(a,b,c,d,e,f,g,h){var j=arguments.length;if(0==j)this._segment1=new u,this._segment2=
new u;else if(1==j)this._segment1=new u(a.segment1),this._segment2=new u(a.segment2);else if(2==j)this._segment1=new u(a),this._segment2=new u(b);else{var p,m,q,t;4==j?(p=a,m=b,q=c,t=d):8==j&&(p=[a,b],t=[g,h],m=[c-a,h-b],q=[e-g,f-h]);this._segment1=new u(p,null,m);this._segment2=new u(t,q,null)}},_changed:function(){delete this._length;delete this._bounds},getPoint1:function(){return this._segment1._point},setPoint1:function(a){a=n.read(arguments);this._segment1._point.set(a.x,a.y)},getPoint2:function(){return this._segment2._point},
setPoint2:function(a){a=n.read(arguments);this._segment2._point.set(a.x,a.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(a){a=n.read(arguments);this._segment1._handleOut.set(a.x,a.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(a){a=n.read(arguments);this._segment2._handleIn.set(a.x,a.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},
getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isSelected:function(){return this.getHandle1().isSelected()&&this.getHandle2().isSelected()},setSelected:function(a){this.getHandle1().setSelected(a);this.getHandle2().setSelected(a)},getValues:function(){return y.getValues(this._segment1,
this._segment2)},getPoints:function(){for(var a=this.getValues(),b=[],c=0;8>c;c+=2)b.push(n.create(a[c],a[c+1]));return b},getLength:function(){var a=arguments[0],b=arguments[1],c=0==arguments.length||0==a&&1==b;if(c&&null!=this._length)return this._length;a=y.getLength(this.getValues(),a,b);c&&(this._length=a);return a},getPart:function(a,b){return new y(y.getPart(this.getValues(),a,b))},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},getParameterAt:function(a,
b){return y.getParameterAt(this.getValues(),a,void 0!==b?b:0>a?1:0)},getParameterOf:function(a){a=n.read(arguments);return y.getParameterOf(this.getValues(),a.x,a.y)},getLocationAt:function(a,b){b||(a=this.getParameterAt(a));return new CurveLocation(this,a)},getLocationOf:function(a){var b=this.getParameterOf.apply(this,arguments);return null!=b?CurveLocation(this,b):null},getPoint:function(a){return y.evaluate(this.getValues(),a,0)},getTangent:function(a){return y.evaluate(this.getValues(),a,1)},
getNormal:function(a){return y.evaluate(this.getValues(),a,2)},getIntersections:function(a){return y._addIntersections(this.getValues(),a.getValues(),this,[])},getCrossings:function(a,b){for(var c=this.getValues(),d=y.solveCubic(c,1,a.y,b),e=0,f=0;f<d;f++){var g=b[f];0<=g&&(1>g&&y.evaluate(c,g,0).x>a.x)&&!(1E-5>g&&1E-5<=y.evaluate(this.getPrevious().getValues(),1,1).y*y.evaluate(c,g,1).y)&&e++}return e},reverse:function(){return new y(this._segment2.reverse(),this._segment1.reverse())},divide:function(a){var b=
null;a&&a.curve===this&&(a=a.parameter);if(0<a&&1>a){var b=y.subdivide(this.getValues(),a),a=b[0],b=b[1],c=this._segment1._point,d=this._segment2._point;this._segment1._handleOut.set(a[2]-c._x,a[3]-c._y);this._segment2._handleIn.set(b[4]-d._x,b[5]-d._y);c=a[6];d=a[7];a=new u(n.create(c,d),n.create(a[4]-c,a[5]-d),n.create(b[2]-c,b[3]-d));this._path?(0<this._segment1._index&&0==this._segment2._index?this._path.add(a):this._path.insert(this._segment2._index,a),b=this.getNext()):(b=this._segment2,this._segment2=
a,b=new y(a,b))}return b},split:function(a){return this._path?this._path.split(this._segment1._index,a):null},clone:function(){return new y(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut);this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn);a.push("point2: "+this._segment2._point);return"{ "+a.join(", ")+" }"},statics:{create:function(a,b,c){var d=
k.create(y);d._path=a;d._segment1=b;d._segment2=c;return d},getValues:function(a,b){var c=a._point,d=a._handleOut,e=b._handleIn,f=b._point;return[c._x,c._y,c._x+d._x,c._y+d._y,f._x+e._x,f._y+e._y,f._x,f._y]},evaluate:function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],j=a[5],p=a[6],m=a[7],q,t;if(0==c&&(0==b||1==b))q=0==b?d:p,t=0==b?e:m;else switch(1E-5>b&&f==d&&g==e?b=1E-5:0.99999<b&&(h==p&&j==m)&&(b=0.99999),a=3*(f-d),f=3*(h-f)-a,p=p-d-a-f,h=3*(g-e),g=3*(j-g)-h,j=m-e-h-g,c){case 0:q=((p*b+f)*
b+a)*b+d;t=((j*b+g)*b+h)*b+e;break;case 1:case 2:q=(3*p*b+2*f)*b+a,t=(3*j*b+2*g)*b+h}return 2==c?new n(t,-q):new n(q,t)},subdivide:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],j=a[6],p=a[7];void 0===b&&(b=0.5);var m=1-b,q=m*c+b*e,t=m*d+b*f,s=m*e+b*g,A=m*f+b*h,g=m*g+b*j,h=m*h+b*p,f=m*q+b*s,e=m*t+b*A,s=m*s+b*g,A=m*A+b*h,w=m*f+b*s,m=m*e+b*A;return[[c,d,q,t,f,e,w,m],[w,m,s,A,g,h,j,p]]},solveCubic:function(a,b,c,d){var e=a[b],f=a[b+2],g=3*(f-e),f=3*(a[b+4]-f)-g;return L.solveCubic(a[b+6]-
e-g-f,f,g,e-c,d,1E-5)},getParameterOf:function(a,b,c){if(1E-5>Math.abs(a[0]-b)&&1E-5>Math.abs(a[1]-c))return 0;if(1E-5>Math.abs(a[6]-b)&&1E-5>Math.abs(a[7]-c))return 1;for(var d=[],e=[],b=y.solveCubic(a,0,b,d),a=y.solveCubic(a,1,c,e),f,g,c=0;-1==b||c<b;)if(-1==b||0<=(f=d[c++])&&1>=f){for(var h=0;-1==a||h<a;)if(-1==a||0<=(g=e[h++])&&1>=g)if(-1==b?f=g:-1==a&&(g=f),1E-5>Math.abs(f-g))return 0.5*(f+g);if(-1==b)break}return null},getPart:function(a,b,c){0<b&&(a=y.subdivide(a,b)[1]);1>c&&(a=y.subdivide(a,
(c-b)/(1-b))[0]);return a},isFlatEnough:function(a,b){var c=a[0],d=a[1],e=a[6],f=a[7],g=3*a[2]-2*c-e,h=3*a[3]-2*d-f,c=3*a[4]-2*e-c,d=3*a[5]-2*f-d;return Math.max(g*g,c*c)+Math.max(h*h,d*d)<16*b*b},getBounds:function(a){for(var b=a.slice(0,2),c=b.slice(0),d=Array(2),e=0;2>e;e++)y._addBounds(a[e],a[e+2],a[e+4],a[e+6],e,0,b,c,d);return x.create(b[0],b[1],c[0]-b[0],c[1]-b[1])},_addBounds:function(a,b,c,d,e,f,g,h,j){function p(a,b){var c=a-b,d=a+b;c<g[e]&&(g[e]=c);d>h[e]&&(h[e]=d)}count=L.solveQuadratic(3*
(b-c)-a+d,2*(a+c)-4*b,b-a,j,1E-5);tMin=1E-5;tMax=1-tMin;p(d,0);for(var m=0;m<count;m++){var q=j[m],t=1-q;tMin<q&&q<tMax&&p(t*t*t*a+3*t*t*q*b+3*t*q*q*c+q*q*q*d,f)}},_addIntersections:function(a,b,c,d){var e=y.getBounds(a),f=y.getBounds(b);if(e.x+e.width>=f.x&&e.y+e.height>=f.y&&e.x<f.x+f.width&&e.y<f.y+f.height)if(y.isFlatEnough(a,1E-5)&&y.isFlatEnough(b,1E-5))(b=(new Y(a[0],a[1],a[6],a[7],!1)).intersect(new Y(b[0],b[1],b[6],b[7],!1)))&&d.push(new CurveLocation(c,null,b));else{a=y.subdivide(a);b=y.subdivide(b);
for(e=0;2>e;e++)for(f=0;2>f;f++)this._addIntersections(a[e],b[f],c,d)}return d}}},k.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var b=this._bounds[a];b||(b=this._bounds[a]=M[a]([this._segment1,this._segment2],!1,this._path._style));return b.clone()}},{}),new function(){function a(a){var b=a[0],e=a[1],f=a[2],g=a[3],h=a[4],j=a[5],p=9*(f-h)+3*(a[6]-b),m=6*(b+h)-12*f,q=3*(f-b),t=9*(g-j)+3*(a[7]-e),s=6*(e+j)-12*
g,A=3*(g-e);return function(a){var b=(p*a+m)*a+q,a=(t*a+s)*a+A;return Math.sqrt(b*b+a*a)}}function b(a,b){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(b-a))))}return{statics:!0,getLength:function(c,d,e){void 0===d&&(d=0);void 0===e&&(e=1);if(c[0]==c[2]&&c[1]==c[3]&&c[6]==c[4]&&c[7]==c[5]){var f=c[6]-c[0],c=c[7]-c[1];return(e-d)*Math.sqrt(f*f+c*c)}f=a(c);return L.integrate(f,d,e,b(d,e))},getParameterAt:function(c,d,e){if(0==d)return e;var f=0<d,g=f?e:0,h=f?1:e,d=Math.abs(d),j=a(c),c=L.integrate(j,
g,h,b(g,h));if(d>=c)return f?h:g;var c=d/c,p=0;return L.findRoot(function(a){var c=b(e,a);p+=e<a?L.integrate(j,e,a,c):-L.integrate(j,a,e,c);e=a;return p-d},j,f?g+c:h-c,g,h,16,1E-5)}}},new function(){function a(d,g){for(var h=0,j=null,p=0,m=d.length;p<m;p++){var q=0>d[p].y?-1:1;null!=j&&q!=j&&h++;j=q}switch(h){case 0:return[];case 1:if(g>=b)return[0.5*(d[0].x+d[5].x)];for(var h=d.length-1,j=d[0].y-d[h].y,p=d[h].x-d[0].x,m=d[0].x*d[h].y-d[h].x*d[0].y,t=q=0,s=1;s<h;s++){var A=j*d[s].x+p*d[s].y+m,w=A*
A;0>A&&w>t?t=w:w>q&&(q=w)}if(Math.abs((q+t)/(2*j*(j*j+p*p)))<c)return h=new Y(d[0],d[5],!0),[L.isZero(h.vector.getLength(!0))?h.point.x:e.intersect(h).x]}h=[[]];j=[];p=[];for(m=0;5>=m;m++)h[0][m]=new n(d[m]);for(q=1;5>=q;q++){h[q]=[];for(m=0;m<=5-q;m++)h[q][m]=h[q-1][m].add(h[q-1][m+1]).multiply(0.5)}for(m=0;5>=m;m++)j[m]=h[m][0],p[m]=h[5-m][m];return a(j,g+1).concat(a(p,g+1))}var b=32,c=Math.pow(2,-b-1),d=[[1,0.6,0.3,0.1],[0.4,0.6,0.6,0.4],[0.1,0.3,0.6,1]],e=new Y(new n(0,0),new n(1,0));return{getNearestLocation:function(b){for(var c=
this.getPoints(),e=[],j=[],p=[],m=[],q=0;3>=q;q++)e[q]=c[q].subtract(b),3>q&&(j[q]=c[q+1].subtract(c[q]).multiply(3));for(q=0;3>q;q++){p[q]=[];for(c=0;3>=c;c++)p[q][c]=j[q].dot(e[c])}for(q=0;5>=q;q++)m[q]=new n(q/5,0);for(e=0;5>=e;e++){q=Math.max(0,e-3+1);for(j=Math.min(e,3);q<=j;q++)c=e-q,m[e].y+=p[c][q]*d[c][q]}for(var p=a(m,0).concat([0,1]),m=Infinity,t,s,q=0;q<p.length;q++)e=this.getPoint(p[q]),j=b.getDistance(e,!0),j<m&&(m=j,t=p[q],s=e);return new CurveLocation(this,t,s,Math.sqrt(m))},getNearestPoint:function(a){return this.getNearestLocation(a).getPoint()}}});
CurveLocation=k.extend({initialize:function(a,b,c,d){this._curve=a;this._parameter=b;this._point=c;this._distance=d},getSegment:function(){if(!this._segment){var a=this._curve,b=this.getParameter();if(0==b)this._segment=a._segment1;else if(1==b)this._segment=a._segment2;else{if(null==b)return null;this._segment=a.getLength(0,b)<a.getLength(b,1)?a._segment1:a._segment2}}return this._segment},getCurve:function(){return this._curve},getPath:function(){return this._curve&&this._curve._path},getIndex:function(){return this._curve&&
this._curve.getIndex()},getOffset:function(){var a=this._curve&&this._curve._path;return a&&a._getOffset(this)},getCurveOffset:function(){var a=this.getParameter();return null!=a&&this._curve&&this._curve.getLength(0,a)},getParameter:function(a){if((null==this._parameter||a)&&this._curve&&this._point)this._parameter=this._curve.getParameterOf(this._point);return this._parameter},getPoint:function(){!this._point&&(this._curve&&null!=this._parameter)&&(this._point=this._curve.getPoint(this._parameter));
return this._point},getTangent:function(){var a=this.getParameter();return null!=a&&this._curve&&this._curve.getTangent(a)},getNormal:function(){var a=this.getParameter();return null!=a&&this._curve&&this._curve.getNormal(a)},getDistance:function(){return this._distance},divide:function(){return this._curve?this._curve.divide(this.getParameter(!0)):null},split:function(){return this._curve?this._curve.split(this.getParameter(!0)):null},toString:function(){var a=[],b=this.getPoint();b&&a.push("point: "+
b);b=this.getIndex();null!=b&&a.push("index: "+b);b=this.getParameter();null!=b&&a.push("parameter: "+k.formatFloat(b));null!=this._distance&&a.push("distance: "+k.formatFloat(this._distance));return"{ "+a.join(", ")+" }"}});var hb=this.PathItem=O.extend({getIntersections:function(a){if(!this.getBounds().intersects(a.getBounds()))return[];for(var b=[],c=this.getCurves(),d=a.getCurves(),a=d.length,e=[],f=0;f<a;f++)e[f]=d[f].getValues();f=0;for(d=c.length;f<d;f++)for(var g=c[f],h=g.getValues(),j=0;j<
a;j++)y._addIntersections(h,e[j],g,b);return b}}),M=this.Path=hb.extend({_type:"path",_serializeFields:k.merge(O.prototype._serializeFields,{segments:[],closed:!1}),initialize:function(a){this._closed=!1;this._segments=[];this.base();var b=Array.isArray(a)?"object"===typeof a[0]?a:arguments:a&&(void 0!==a.point||void 0!==a.x)?arguments:null;this.setSegments(b||[]);b||this._setProperties(a)},clone:function(){var a=this._clone(new M(this._segments));a._closed=this._closed;void 0!==this._clockwise&&
(a._clockwise=this._clockwise);return a},_changed:function(a){O.prototype._changed.call(this,a);if(a&4){if(delete this._length,delete this._clockwise,null!=this._curves)for(var a=0,b=this._curves.length;a<b;a++)this._curves[a]._changed(5)}else a&8&&delete this._bounds},getSegments:function(){return this._segments},setSegments:function(a){this._selectedSegmentState=0;this._segments.length=0;delete this._curves;this._add(u.readAll(a))},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-
1]},getCurves:function(a){var b=this._curves,c=this._segments;if(!b){var d=c.length;!this._closed&&0<d&&d--;this._curves=b=Array(d);for(var e=0;e<d;e++)b[e]=y.create(this,c[e],c[e+1]||c[0])}a&&(!this._closed&&this._style._fillColor)&&(b=b.concat([y.create(this,c[c.length-1],c[0])]));return b},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){this._closed=
a;if(this._curves){var b=this._segments.length;!a&&0<b&&b--;this._curves.length=b;a&&(this._curves[b-1]=y.create(this,this._segments[b-1],this._segments[0]))}this._changed(5)}},isEmpty:function(){return 0===this._segments.length},isPolygon:function(){for(var a=0,b=this._segments.length;a<b;a++)if(!this._segments[a].isLinear())return!1;return!0},applyMatrix:!0,_applyMatrix:function(a){for(var b=Array(6),c=0,d=this._segments.length;c<d;c++)this._segments[c]._transformCoordinates(a,b,!0);c=this._style;
b=c._fillColor;c=c._strokeColor;b&&b.transform&&b.transform(a);c&&c.transform&&c.transform(a);return!0},_add:function(a,b){for(var c=this._segments,d=this._curves,e=a.length,f=null==b,b=f?c.length:b,g=this.isFullySelected(),h=0;h<e;h++){var j=a[h];j._path&&(j=a[h]=j.clone());j._path=this;j._index=b+h;g&&(j._selectionState=4);j._selectionState&&this._updateSelection(j,0,j._selectionState)}if(f)c.push.apply(c,a);else{c.splice.apply(c,[b,0].concat(a));h=b+e;for(f=c.length;h<f;h++)c[h]._index=h}if(d){0<
b&&b--;h=b;for(f=b+e;h<f;h++)d.splice(h,0,y.create(this,c[h],c[h+1]||c[0]));this._adjustCurves(b-1,b+e)}this._changed(5);return a},add:function(a){return 1<arguments.length&&"number"!==typeof a?this._add(u.readAll(arguments)):this._add([u.read(arguments)])[0]},insert:function(a,b){return 2<arguments.length&&"number"!==typeof b?this._add(u.readAll(arguments,1),a):this._add([u.read(arguments,1)],a)[0]},addSegment:function(a){return this._add([u.read(arguments)])[0]},insertSegment:function(a,b){return this._add([u.read(arguments,
1)],a)[0]},addSegments:function(a){return this._add(u.readAll(a))},insertSegments:function(a,b){return this._add(u.readAll(b),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,b){var a=a||0,b=k.pick(b,this._segments.length),c=this._segments,d=this._curves,e=c.splice(a,b-a),f=e.length;if(!f)return e;for(var g=0;g<f;g++){var h=e[g];h._selectionState&&this._updateSelection(h,h._selectionState,0);h._index=h._path=void 0}g=a;for(h=c.length;g<h;g++)c[g]._index=
g;d&&(c=a==c.length+(this._closed?1:0)?a-1:a,d.splice(c,f),this._adjustCurves(c-1,c+f));this._changed(5);return e},_adjustCurves:function(a,b){var c=this._segments,d=this._curves,e;if(e=d[this._closed&&-1==a?c.length-1:a])e._segment2=c[a+1]||c[0];if(e=d[b])e._segment1=c[b]},isFullySelected:function(){return this._selected&&this._selectedSegmentState==4*this._segments.length},setFullySelected:function(a){var b=this._segments.length;this._selectedSegmentState=a?4*b:0;for(var c=0;c<b;c++)this._segments[c]._selectionState=
a?4:0;this.setSelected(a)},_updateSelection:function(a,b,c){a._selectionState=c;0<(this._selectedSegmentState+=c-b)&&this.setSelected(!0)},flatten:function(a){for(var b=new Vb(this),c=0,a=b.length/Math.ceil(b.length/a),d=b.length+(this._closed?-a:a)/2,e=[];c<=d;)e.push(new u(b.evaluate(c,0))),c+=a;this.setSegments(e)},simplify:function(a){2<this._segments.length&&(a=new Lc(this,a||2.5),this.setSegments(a.fit()))},split:function(a,b){if(1==arguments.length){var c=a;"number"===typeof c&&(c=this.getLocationAt(c));
a=c.index;b=c.parameter}1<=b&&(a++,b--);c=this.getCurves();if(0<=a&&a<c.length){0<b&&c[a++].divide(b);c=this.removeSegments(a,this._segments.length);if(this._closed)return this.setClosed(!1),this.insertSegments(0,c),this.addSegment(c[0].clone()),this;if(0<a)return this.addSegment(c[0]),c=new M(c),c.setStyle(this.getStyle()),c}return null},isClockwise:function(){function a(a,e){void 0!==c&&(b+=(c-a)*(e+d));c=a;d=e}if(void 0!==this._clockwise)return this._clockwise;for(var b=0,c,d,e=0,f=this._segments.length;e<
f;e++){var g=this._segments[e],h=this._segments[e+1<f?e+1:0],j=g._point,g=g._handleOut,p=h._handleIn,h=h._point;a(j._x,j._y);a(j._x+g._x,j._y+g._y);a(h._x+p._x,h._y+p._y);a(h._x,h._y)}return 0<b},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse();this._clockwise=a},reverse:function(){this._segments.reverse();for(var a=0,b=this._segments.length;a<b;a++){var c=this._segments[a],d=c._handleIn;c._handleIn=c._handleOut;c._handleOut=d;c._index=a}void 0!==this._clockwise&&(this._clockwise=
!this._clockwise)},join:function(a){if(a){var b=a._segments,c=this.getLastSegment(),d=a.getLastSegment();c._point.equals(d._point)&&a.reverse();d=a.getFirstSegment();if(c._point.equals(d._point))c.setHandleOut(d._handleOut),this._add(b.slice(1));else{var e=this.getFirstSegment();e._point.equals(d._point)&&a.reverse();d=a.getLastSegment();e._point.equals(d._point)?(e.setHandleIn(d._handleIn),this._add(b.slice(0,b.length-1),0)):this._add(b.slice(0))}a.remove();e=this.getFirstSegment();c=this.getLastSegment();
c._point.equals(e._point)&&(e.setHandleIn(c._handleIn),c.remove(),this.setClosed(!0));this._changed(5);return!0}return!1},reduce:function(){return this},getLength:function(){if(null==this._length)for(var a=this.getCurves(),b=this._length=0,c=a.length;b<c;b++)this._length+=a[b].getLength();return this._length},_getOffset:function(a){var b=a&&a.getIndex();if(null!=b){for(var c=this.getCurves(),d=0,e=0;e<b;e++)d+=c[e].getLength();return d+c[b].getLength(0,a.getParameter())}return null},getLocationOf:function(a){for(var a=
n.read(arguments),b=this.getCurves(),c=0,d=b.length;c<d;c++){var e=b[c].getLocationOf(a);if(null!=e)return e}return null},getLocationAt:function(a,b){var c=this.getCurves(),d=0;if(b)return d=~~a,c[d].getLocationAt(a-d,!0);for(var e=0,f=c.length;e<f;e++){var g=d,h=c[e],d=d+h.getLength();if(d>=a)return h.getLocationAt(a-g)}return a<=this.getLength()?new CurveLocation(c[c.length-1],1):null},getPointAt:function(a,b){var c=this.getLocationAt(a,b);return c&&c.getPoint()},getTangentAt:function(a,b){var c=
this.getLocationAt(a,b);return c&&c.getTangent()},getNormalAt:function(a,b){var c=this.getLocationAt(a,b);return c&&c.getNormal()},getNearestLocation:function(a){for(var b=this.getCurves(),c=Infinity,d=null,e=0,f=b.length;e<f;e++){var g=b[e].getNearestLocation(a);g._distance<c&&(c=g._distance,d=g)}return d},getNearestPoint:function(a){return this.getNearestLocation(a).getPoint()},contains:function(a){a=n.read(arguments);if(!this._closed&&!this._style._fillColor||!this.getRoughBounds()._containsPoint(a))return!1;
for(var b=this.getCurves(!0),c=0,d=Array(3),e=0,f=b.length;e<f;e++)c+=b[e].getCrossings(a,d);return 1==(c&1)},_hitTest:function(a,b){function c(b,c,d){if(a.getDistance(c)<f)return new HitResult(d,p,{segment:b,point:c})}function d(a,d){var e=a._point;return(d||b.segments)&&c(a,e,"segment")||!d&&b.handles&&(c(a,e.add(a._handleIn),"handle-in")||c(a,e.add(a._handleOut),"handle-out"))}var e=this._style,f=b.tolerance||0,g=(b.stroke&&e._strokeColor?e._strokeWidth/2:0)+f,h,j,p=this;if(b.ends&&!b.segments&&
!this._closed){if(j=d(this.getFirstSegment(),!0)||d(this.getLastSegment(),!0))return j}else if(b.segments||b.handles)for(var m=0,q=this._segments.length;m<q;m++)if(j=d(this._segments[m]))return j;b.stroke&&0<g&&(h=this.getNearestLocation(a));if(!(h&&h._distance<=g)&&b.fill&&e._fillColor&&this.contains(a))return new HitResult("fill",this);!h&&(b.stroke&&0<g)&&(h=this.getNearestLocation(a));if(h&&h._distance<=g)return b.stroke?new HitResult("stroke",this,{location:h}):new HitResult("fill",this)}},new function(){function a(a,
c,d){function e(c){c=f[c];if(d)c._transformCoordinates(d,h,!1),p=h[0],m=h[1];else{var e=c._point;p=e._x;m=e._y}j?(a.moveTo(p,m),j=!1):(d?(s=h[2],k=h[3]):(e=c._handleIn,s=p+e._x,k=m+e._y),s==p&&k==m&&w==q&&C==t?a.lineTo(p,m):a.bezierCurveTo(w,C,s,k,p,m));q=p;t=m;d?(w=h[4],C=h[5]):(e=c._handleOut,w=q+e._x,C=t+e._y)}for(var f=c._segments,g=f.length,h=Array(6),j=!0,p,m,q,t,s,k,w,C,n=0;n<g;n++)e(n);c._closed&&1<g&&e(0)}return{draw:function(b,c){c.compound||b.beginPath();var d=this._style,e=d._fillColor,
f=d._strokeColor,g=d._dashArray,h=f&&g&&g.length;(c.compound||this._clipMask||e||f&&!h)&&a(b,this);this._closed&&b.closePath();if(this._clipMask)b.clip();else if(!c.compound&&(e||f))if(this._setStyles(b),e&&b.fill(),f){if(h){b.beginPath();e=new Vb(this);d=d._dashOffset;for(h=0;d<e.length;)f=d+g[h++%g.length],e.drawPart(b,d,f),d=f+g[h++%g.length]}b.stroke()}},drawSelected:function(b,c){b.beginPath();a(b,this,c);b.stroke();for(var d=this._segments,e=Array(6),f=0,g=d.length;f<g;f++){var h=d[f];h._transformCoordinates(c,
e,!1);var h=h._selectionState,j=h&4,p=e[0],m=e[1],q=function(a){var c=e[a],a=e[a+1];if(p!=c||m!=a)b.beginPath(),b.moveTo(p,m),b.lineTo(c,a),b.stroke(),b.beginPath(),b.arc(c,a,1.75,0,2*Math.PI,!0),b.fill()};(j||h&1)&&q(2);(j||h&2)&&q(4);b.save();b.beginPath();b.rect(p-2,m-2,4,4);b.fill();j||(b.beginPath(),b.rect(p-1,m-1,2,2),b.fillStyle="#ffffff",b.fill());b.restore()}0==this._selectedSegmentState&&O.drawSelectedBounds(this.getBounds(),b,c)}}},new function(){function a(a){var c=a.length,d=[],e=[],
f=2;d[0]=a[0]/f;for(var g=1;g<c;g++)e[g]=1/f,f=(g<c-1?4:2)-e[g],d[g]=(a[g]-d[g-1])/f;for(g=1;g<c;g++)d[c-g-1]-=e[c-g]*d[c-g];return d}return{smooth:function(){var b=this._segments,c=b.length,d=c,e;if(!(2>=c)){this._closed?(e=Math.min(c,4),d+=2*Math.min(c,e)):e=0;for(var f=[],g=0;g<c;g++)f[g+e]=b[g]._point;if(this._closed)for(g=0;g<e;g++)f[g]=b[g+c-e]._point,f[g+c+e]=b[g]._point;else d--;for(var h=[],g=1;g<d-1;g++)h[g]=4*f[g]._x+2*f[g+1]._x;h[0]=f[0]._x+2*f[1]._x;h[d-1]=3*f[d-1]._x;for(var j=a(h),
g=1;g<d-1;g++)h[g]=4*f[g]._y+2*f[g+1]._y;h[0]=f[0]._y+2*f[1]._y;h[d-1]=3*f[d-1]._y;h=a(h);if(this._closed){for(g=0;g<e;g++,c++){var p=g/e,m=1-p,q=g+e,t=c+e;j[c]=j[g]*p+j[c]*m;h[c]=h[g]*p+h[c]*m;j[t]=j[q]*m+j[t]*p;h[t]=h[q]*m+h[t]*p}d--}c=null;for(g=e;g<=d-e;g++)p=b[g-e],c&&p.setHandleIn(c.subtract(p._point)),g<d&&(p.setHandleOut(n.create(j[g],h[g]).subtract(p._point)),c=g<d-1?n.create(2*f[g+1]._x-j[g+1],2*f[g+1]._y-h[g+1]):n.create((f[d]._x+j[d-1])/2,(f[d]._y+h[d-1])/2));this._closed&&c&&(p=this._segments[0],
p.setHandleIn(c.subtract(p._point)))}}}},new function(){function a(a){a=a._segments;if(0==a.length)throw Error("Use a moveTo() command first");return a[a.length-1]}return{moveTo:function(a){1===this._segments.length&&this.removeSegment(0);this._segments.length||this._add([new u(n.read(arguments))])},moveBy:function(){throw Error("moveBy() is unsupported on Path items.");},lineTo:function(a){this._add([new u(n.read(arguments))])},cubicCurveTo:function(b,c,d){var e=n.read(arguments),f=n.read(arguments),
g=n.read(arguments),h=a(this);h.setHandleOut(e.subtract(h._point));this._add([new u(g,f.subtract(d))])},quadraticCurveTo:function(b,c){var d=n.read(arguments),c=n.read(arguments),e=a(this)._point;this.cubicCurveTo(d.add(e.subtract(d).multiply(1/3)),d.add(c.subtract(d).multiply(1/3)),c)},curveTo:function(b,c,d){var e=n.read(arguments),f=n.read(arguments),g=k.pick(k.read(arguments),0.5),h=1-g,j=a(this)._point,e=e.subtract(j.multiply(h*h)).subtract(f.multiply(g*g)).divide(2*g*h);if(e.isNaN())throw Error("Cannot put a curve through points with parameter = "+
g);this.quadraticCurveTo(e,f)},arcTo:function(b,c){var d=a(this),e=d._point,f,g=n.read(arguments),h=k.pick(k.peek(arguments),!0);"boolean"===typeof h?(b=g,c=h,g=e.add(b).divide(2),f=g.add(g.subtract(e).rotate(c?-90:90))):(f=g,b=n.read(arguments));var g=new Y(e.add(f).divide(2),f.subtract(e).rotate(90)),h=new Y(f.add(b).divide(2),b.subtract(f).rotate(90)),g=g.intersect(h),j=new Y(e,b,!0),h=j.getSide(f);if(!g){if(!h)return this.lineTo(b);throw Error("Cannot put an arc through the given points: "+[e,
f,b]);}e=e.subtract(g);e.getLength();f=e.getDirectedAngle(b.subtract(g));j=j.getSide(g);0==j?f=h*Math.abs(f):h==j&&(f-=360*(0>f?-1:1));h=Math.abs(f);h=360<=h?4:Math.ceil(h/90);f/=h;for(var j=f*Math.PI/360,j=4/3*Math.sin(j)/(1+Math.cos(j)),p=[],m=0;m<=h;m++){var q=m<h?g.add(e):b,t=m<h?e.rotate(90).multiply(j):null;0==m?d.setHandleOut(t):p.push(new u(q,e.rotate(-90).multiply(j),t));e=e.rotate(f)}this._add(p)},lineBy:function(b){var b=n.read(arguments),c=a(this);this.lineTo(c._point.add(b))},curveBy:function(b,
c,d){var b=n.read(b),c=n.read(c),e=a(this)._point;this.curveTo(e.add(b),e.add(c),d)},arcBy:function(b,c){var b=n.read(b),c=n.read(c),d=a(this)._point;this.arcBy(d.add(b),d.add(c))},closePath:function(){this.setClosed(!0)}}},{_getBounds:function(a,b){return M[a](this._segments,this._closed,this._style,b)},statics:{getBounds:function(a,b,c,d,e){function f(a){a._transformCoordinates(d,g,!1);for(a=0;2>a;a++)y._addBounds(h[a],h[a+4],g[a+2],g[a],a,e?e[a]:0,j,p,m);a=h;h=g;g=a}c=a[0];if(!c)return new x;for(var g=
Array(6),h=c._transformCoordinates(d,Array(6),!1),j=h.slice(0,2),p=j.slice(0),m=Array(2),q=1,t=a.length;q<t;q++)f(a[q]);b&&f(c);return x.create(j[0],j[1],p[0]-j[0],p[1]-j[1])},getStrokeBounds:function(a,b,c,d){function e(a){w=w.include(d?d._transformPoint(a,a):a)}function f(a,b){var c=a.getPoint(b),d=a.getNormal(b).normalize(j);e(c.add(d));e(c.subtract(d))}function g(a,b){if("round"===b||!a._handleIn.isZero()&&!a._handleOut.isZero())w=w.unite(va.setCenter(d?d._transformPoint(a._point):a._point));
else if("bevel"==b){var c=a.getCurve();f(c,0);f(c.getPrevious(),1)}else if("miter"==b){var h=a.getCurve(),m=h.getPrevious(),c=h.getPoint(0),m=m.getNormal(1).normalize(j),h=h.getNormal(0).normalize(j),m=new Y(c.subtract(m),n.create(-m.y,m.x)),h=new Y(c.subtract(h),n.create(-h.y,h.x)),h=m.intersect(h);!h||c.getDistance(h)>C?g(a,"bevel"):e(h)}}function h(a,b,c){switch(b){case "round":return g(a,b);case "butt":case "square":var d=a.getCurve(),a=d.getPoint(c),d=d.getNormal(c).normalize(j);"square"===b&&
(a=a.add(d.rotate(0==c?-90:90)));e(a.add(d));e(a.subtract(d))}}if(!c._strokeColor||!c._strokeWidth)return M.getBounds(a,b,c,d);var j=c._strokeWidth/2,p;var m=j;if(d){p=d.createShiftless();var q=p.transform(n.create(m,0)),m=p.transform(n.create(0,m)),t=q.getAngleInRadians(),q=q.getLength(),m=m.getLength();p=Math.sin(t);var s=Math.cos(t),k=Math.tan(t),t=-Math.atan(m*k/q),k=Math.atan(m/(k*q));p=[Math.abs(q*Math.cos(t)*s-m*Math.sin(t)*p),Math.abs(m*Math.sin(k)*s+q*Math.cos(k)*p)]}else p=[m,m];var w=M.getBounds(a,
b,c,d,p),q=c._strokeJoin,m=c._strokeCap,C=c._miterLimit*c._strokeWidth/2,va=new x((new v(p)).multiply(2)),c=1;for(p=a.length-(b?0:1);c<p;c++)g(a[c],q);b?g(a[0],q):(h(a[0],m,0),h(a[a.length-1],m,1));return w},getHandleBounds:function(a,b,c,d,e,f){for(var b=Array(6),c=Infinity,g=-c,h=c,j=g,e=e/2||0,f=f/2||0,p=0,m=a.length;p<m;p++){a[p]._transformCoordinates(d,b,!1);for(var q=0;6>q;q+=2){var t=0==q?f:e,s=b[q],k=b[q+1],w=s-t,s=s+t,C=k-t,t=k+t;w<c&&(c=w);s>g&&(g=s);C<h&&(h=C);t>j&&(j=t)}}return x.create(c,
h,g-c,j-h)},getRoughBounds:function(a,b,c,d){var e=c._strokeColor?c._strokeWidth:0;return M.getHandleBounds(a,b,c,d,e,"miter"==c._strokeJoin?e*c._miterLimit:e)}}});M.inject({statics:new function(){function a(a){var b;k.hasNamed(a,"from")?b=new x(n.readNamed(a,"from"),n.readNamed(a,"to")):k.hasNamed(a,"size")?(b=new x(n.readNamed(a,"point"),v.readNamed(a,"size")),k.hasNamed(a,"center")&&b.setCenter(n.readNamed(a,"center"))):b=x.readNamed(a,"rectangle");return b}function b(){var b=a(arguments),c=b.getLeft(),
d=b.getTop(),e=b.getRight(),b=b.getBottom(),p=new M(arguments._filtered);p._add([new u(n.create(c,b)),new u(n.create(c,d)),new u(n.create(e,d)),new u(n.create(e,b))]);p._closed=!0;return p}function c(){for(var b=a(arguments),c=new M(arguments._filtered),d=b.getPoint(!0),b=b.getSize(!0),j=Array(4),p=0;4>p;p++){var m=e[p];j[p]=new u(m._point.multiply(b).add(d),m._handleIn.multiply(b),m._handleOut.multiply(b))}c._add(j);c._closed=!0;return c}var d=2*(Math.sqrt(2)-1)/3,e=[new u([0,0.5],[0,d],[0,-d]),
new u([0.5,0],[-d,0],[d,0]),new u([1,0.5],[0,-d],[0,d]),new u([0.5,1],[d,0],[-d,0])];return{Line:function(){return(new M(n.readNamed(arguments,"from"),n.readNamed(arguments,"to"))).set(arguments._filtered)},Rectangle:b,RoundRectangle:function(){var c=a(arguments),e=v.readNamed(arguments,"radius");if(e.isZero())return b(c);var e=v.min(e,c.getSize(!0).divide(2)),h=c.getBottomLeft(!0),j=c.getTopLeft(!0),p=c.getTopRight(!0),c=c.getBottomRight(!0),m=e.multiply(2*d),q=new M(arguments._filtered);q._add([new u(h.add(e.width,
0),null,[-m.width,0]),new u(h.subtract(0,e.height),[0,m.height],null),new u(j.add(0,e.height),null,[0,-m.height]),new u(j.add(e.width,0),[-m.width,0],null),new u(p.subtract(e.width,0),null,[m.width,0]),new u(p.add(0,e.height),[0,-m.height],null),new u(c.subtract(0,e.height),null,[0,m.height]),new u(c.subtract(e.width,0),[m.width,0],null)]);q._closed=!0;return q},Ellipse:c,Oval:c,Circle:function(){var a=n.readNamed(arguments,"center"),b=k.readNamed(arguments,"radius");return c(new x(a.subtract(b),
v.create(2*b,2*b))).set(arguments._filtered)},Arc:function(){var a=n.readNamed(arguments,"from"),b=n.readNamed(arguments,"through"),c=n.readNamed(arguments,"to"),d=new M(arguments._filtered);d.moveTo(a);d.arcTo(b,c);return d},RegularPolygon:function(){for(var a=n.readNamed(arguments,"center"),b=k.readNamed(arguments,"numSides"),c=k.readNamed(arguments,"radius"),d=new M(arguments._filtered),e=360/b,m=!(b%3),c=new n(0,m?-c:c),m=m?-1:0.5,q=Array(b),t=0;t<b;t++)q[t]=new u(a.add(c.rotate((t+m)*e)));d._add(q);
d._closed=!0;return d},Star:function(){for(var a=n.readNamed(arguments,"center"),b=2*k.readNamed(arguments,"numPoints"),c=k.readNamed(arguments,"radius1"),d=k.readNamed(arguments,"radius2"),e=new M(arguments._filtered),m=360/b,q=new n(0,-1),t=Array(b),s=0;s<b;s++)t[s]=new u(a.add(q.rotate(m*s).multiply(s%2?d:c)));e._add(t);e._closed=!0;return e}}}});var Ba=this.CompoundPath=hb.extend({_type:"compoundpath",initialize:function(a){this.base();this._children=[];this._namedChildren={};this.addChildren(Array.isArray(a)?
a:arguments)},insertChild:function(a,b,c){if("path"!==b._type)return null;a=this.base(a,b);!c&&(a&&void 0===b._clockwise)&&b.setClockwise(0==b._index);return a},reduce:function(){if(1==this._children.length){var a=this._children[0];a.insertAbove(this);this.remove();return a}return this},smooth:function(){for(var a=0,b=this._children.length;a<b;a++)this._children[a].smooth()},getCurves:function(){for(var a=[],b=0,c=this._children.length;b<c;b++)a=a.concat(this._children[b].getCurves());return a},isEmpty:function(){return 0==
this._children.length},contains:function(a){for(var a=n.read(arguments),b=0,c=0,d=this._children.length;c<d;c++)this._children[c].contains(a)&&b++;return 1==(b&1)},_hitTest:function(a,b){return this.base(a,k.merge(b,{fill:!1}))||b.fill&&this._style._fillColor&&this.contains(a)?new HitResult("fill",this):null},draw:function(a,b){var c=this._children,d=this._style;if(0!=c.length){a.beginPath();b.compound=!0;for(var e=0,f=c.length;e<f;e++)O.draw(c[e],a,b);b.compound=!1;this._clipMask?a.clip():(this._setStyles(a),
d._fillColor&&a.fill(),d._strokeColor&&a.stroke())}}},new function(){function a(a){if(!a._children.length)throw Error("Use a moveTo() command first");return a._children[a._children.length-1]}var b={moveTo:function(a){var b=new M;this.addChild(b);b.moveTo.apply(b,arguments)},moveBy:function(b){this.moveTo(a(this).getLastSegment()._point.add(n.read(arguments)))},closePath:function(){a(this).setClosed(!0)}};k.each("lineTo cubicCurveTo quadraticCurveTo curveTo arcTo lineBy curveBy arcBy".split(" "),function(c){b[c]=
function(){var b=a(this);b[c].apply(b,arguments)}});return b}),Vb=k.extend({initialize:function(a){function b(a,b){var c=y.getValues(a,b);f.curves.push(c);f._computeParts(c,a._index,0,1)}this.curves=[];this.parts=[];this.index=this.length=0;for(var c=a._segments,d=c[0],e,f=this,g=1,h=c.length;g<h;g++)e=c[g],b(d,e),d=e;a._closed&&b(e,c[0])},_computeParts:function(a,b,c,d){if(0.03125<d-c&&!y.isFlatEnough(a,0.25)){var a=y.subdivide(a),e=(c+d)/2;this._computeParts(a[0],b,c,e);this._computeParts(a[1],
b,e,d)}else c=a[6]-a[0],a=a[7]-a[1],c=Math.sqrt(c*c+a*a),1E-5<c&&(this.length+=c,this.parts.push({offset:this.length,value:d,index:b}))},getParameterAt:function(a){for(var b,c=this.index;!(b=c,0==c||this.parts[--c].offset<a););for(var d=this.parts.length;b<d;b++)if(c=this.parts[b],c.offset>=a)return this.index=b,b=(d=this.parts[b-1])&&d.index==c.index?d.value:0,d=d?d.offset:0,{value:b+(c.value-b)*(a-d)/(c.offset-d),index:c.index};c=this.parts[this.parts.length-1];return{value:1,index:c.index}},evaluate:function(a,
b){var c=this.getParameterAt(a);return y.evaluate(this.curves[c.index],c.value,b)},drawPart:function(a,b,c){for(var b=this.getParameterAt(b),c=this.getParameterAt(c),d=b.index;d<=c.index;d++){var e=y.getPart(this.curves[d],d==b.index?b.value:0,d==c.index?c.value:1);d==b.index&&a.moveTo(e[0],e[1]);a.bezierCurveTo.apply(a,e.slice(2))}}}),Lc=k.extend({initialize:function(a,b){this.points=[];for(var c=a._segments,d,e=0,f=c.length;e<f;e++){var g=c[e].point.clone();if(!d||!d.equals(g))this.points.push(g),
d=g}this.error=b},fit:function(){this.segments=[new u(this.points[0])];this.fitCubic(0,this.points.length-1,this.points[1].subtract(this.points[0]).normalize(),this.points[this.points.length-2].subtract(this.points[this.points.length-1]).normalize());return this.segments},fitCubic:function(a,b,c,d){if(1==b-a){var a=this.points[a],b=this.points[b],e=a.getDistance(b)/3;this.addCurve([a,a.add(c.normalize(e)),b.add(d.normalize(e)),b])}else{for(var f=this.chordLengthParameterize(a,b),g=Math.max(this.error,
this.error*this.error),h=0;4>=h;h++){var j=this.generateBezier(a,b,f,c,d),p=this.findMaxError(a,b,j,f);if(p.error<this.error){this.addCurve(j);return}e=p.index;if(p.error>=g)break;this.reparameterize(a,b,f,j);g=p.error}f=this.points[e-1].subtract(this.points[e]);g=this.points[e].subtract(this.points[e+1]);f=f.add(g).divide(2).normalize();this.fitCubic(a,e,c,f);this.fitCubic(e,b,f.negate(),d)}},addCurve:function(a){this.segments[this.segments.length-1].setHandleOut(a[1].subtract(a[0]));this.segments.push(new u(a[3],
a[2].subtract(a[3])))},generateBezier:function(a,b,c,d,e){for(var f=1E-11,g=this.points[a],h=this.points[b],j=[[0,0],[0,0]],p=[0,0],m=0,b=b-a+1;m<b;m++){var q=c[m],t=1-q,s=3*q*t,k=t*t*t,t=s*t,s=s*q,w=q*q*q,q=d.normalize(t),C=e.normalize(s),k=this.points[a+m].subtract(g.multiply(k+t)).subtract(h.multiply(s+w));j[0][0]+=q.dot(q);j[0][1]+=q.dot(C);j[1][0]=j[0][1];j[1][1]+=C.dot(C);p[0]+=q.dot(k);p[1]+=C.dot(k)}var a=j[0][0]*j[1][1]-j[1][0]*j[0][1],n;Math.abs(a)>f?(n=j[0][0]*p[1]-j[1][0]*p[0],p=(p[0]*
j[1][1]-p[1]*j[0][1])/a,n/=a):(a=j[0][0]+j[0][1],j=j[1][0]+j[1][1],p=Math.abs(a)>f?n=p[0]/a:Math.abs(j)>f?n=p[1]/j:n=0);j=h.getDistance(g);f*=j;if(p<f||n<f)p=n=j/3;return[g,g.add(d.normalize(p)),h.add(e.normalize(n)),h]},reparameterize:function(a,b,c,d){for(var e=a;e<=b;e++)c[e-a]=this.findRoot(d,this.points[e],c[e-a])},findRoot:function(a,b,c){for(var d=[],e=[],f=0;2>=f;f++)d[f]=a[f+1].subtract(a[f]).multiply(3);for(f=0;1>=f;f++)e[f]=d[f+1].subtract(d[f]).multiply(2);a=this.evaluate(3,a,c);d=this.evaluate(2,
d,c);e=this.evaluate(1,e,c);b=a.subtract(b);e=d.dot(d)+b.dot(e);return 1E-5>Math.abs(e)?c:c-b.dot(d)/e},evaluate:function(a,b,c){for(var b=b.slice(),d=1;d<=a;d++)for(var e=0;e<=a-d;e++)b[e]=b[e].multiply(1-c).add(b[e+1].multiply(c));return b[0]},chordLengthParameterize:function(a,b){for(var c=[0],d=a+1;d<=b;d++)c[d-a]=c[d-a-1]+this.points[d].getDistance(this.points[d-1]);for(var d=1,e=b-a;d<=e;d++)c[d]/=c[e];return c},findMaxError:function(a,b,c,d){for(var e=Math.floor((b-a+1)/2),f=0,g=a+1;g<b;g++){var h=
this.evaluate(3,c,d[g-a]).subtract(this.points[g]),h=h.x*h.x+h.y*h.y;h>=f&&(f=h,e=g)}return{error:f,index:e}}}),Pa=this.TextItem=O.extend({_boundsGetter:"getBounds",initialize:function(a){this._style=Mc.create(this);this._paragraphStyle=Nc.create(this);var b=n.read(arguments,0,0,!1,!0);this.base(b);this.setParagraphStyle();this._content="";this._lines=[];b||this._setProperties(a)},_clone:function(a){a.setContent(this._content);a.setParagraphStyle(this._paragraphStyle);return this.base(a)},getContent:function(){return this._content},
setContent:function(a){this._content=""+a;this._lines=this._content.split(/\r\n|\n|\r/mg);this._changed(65)},isEmpty:function(){return!this._content},getCharacterStyle:function(){return this.getStyle()},setCharacterStyle:function(a){this.setStyle(a)}}),Wb=this.PointText=Pa.extend({_type:"pointtext",clone:function(){return this._clone(new Wb)},getPoint:function(){var a=this._matrix.getTranslation();return oa.create(this,"setPoint",a.x,a.y)},setPoint:function(a){this.translate(n.read(arguments).subtract(this._matrix.getTranslation()))},
draw:function(a){if(this._content){this._setStyles(a);var b=this._style,c=this.getLeading(),d=this._lines;a.font=b.getFontStyle();a.textAlign=this.getJustification();for(var e=0,f=d.length;e<f;e++){var g=d[e];b._fillColor&&a.fillText(g,0,0);b._strokeColor&&a.strokeText(g,0,0);a.translate(0,c)}}},drawSelected:function(a,b){O.drawSelectedBounds(this._getBounds(),a,b)}},new function(){var a=null;return{_getBounds:function(b,c){a||(a=W.getCanvas(v.create(1,1)).getContext("2d"));var d=this.getJustification(),
e=0;a.font=this._style.getFontStyle();for(var f=0,g=0,h=this._lines.length;g<h;g++)f=Math.max(f,a.measureText(this._lines[g]).width);"left"!==d&&(e-=f/("center"===d?2:1));d=this.getLeading();g=this._lines.length;e=x.create(e,g?d/4+(g-1)*d:0,f,-g*d);return c?c._transformBounds(e,e):e}}}),Xb=k.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],miterLimit:["stroke-miterlimit",
"number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"]},function(a,b){var c=k.capitalize(b);this.attributes[a[0]]=this.properties[b]={type:a[1],property:b,attribute:a[0],get:"get"+c,set:"set"+c}},{properties:{},attributes:{}});new function(){function a(a){return h(a.x)+","+h(a.y)}function b(a,b){for(var c in b){var d=b[c];"number"===typeof d&&(d=h(d));a.setAttribute(c,d)}return a}function c(a,c){return b(document.createElementNS("http://www.w3.org/2000/svg",a),
c)}function d(a,b,c){return a[b]._point.getDistance(a[c]._point)}function e(b,c){var d=b._matrix,e=d.getTranslation(),g={};if(c){var d=d.createShiftless(),f=d._inverseTransform(e);g.x=f.x;g.y=f.y;e=null}if(d.isIdentity())return g;var j=d.getRotation(),f=[];null!=j?(d=d.clone().scale(1,-1),e&&!e.isZero()&&f.push("translate("+a(e)+")"),j&&f.push("rotate("+h(j)+")"),d=d.getScaling(),(!L.isZero(d.x-1)||!L.isZero(d.y-1))&&f.push("scale("+a(d)+")")):f.push("matrix("+d.getValues().join(",")+")");g.transform=
f.join(" ");return g}function f(a,b){function c(a,d){var e=b[a],g=e.getNext(),f=b[d],h=f.getNext();return e._handleOut.isZero()&&g._handleIn.isZero()&&f._handleOut.isZero()&&h._handleIn.isZero()&&g._point.subtract(e._point).isColinear(h._point.subtract(f._point))}function e(a){var c=b[a],d=c.getNext(),a=c._handleOut,f=d._handleIn;if(a.isOrthogonal(f)){var c=c._point,d=d._point,h=(new Y(c,a)).intersect(new Y(d,f));return h&&L.isZero(a.getLength()/h.subtract(c).getLength()-g)&&L.isZero(f.getLength()/
h.subtract(d).getLength()-g)}}var g=4*(Math.sqrt(2)-1)/3;if(a.isPolygon())return 4===b.length&&a._closed&&c(0,2)&&c(1,3)?"rect":0===b.length?"empty":3<=b.length?a._closed?"polygon":"polyline":"line";if(a._closed){if(8===b.length&&e(0)&&e(2)&&e(4)&&e(6)&&c(1,5)&&c(3,7))return"roundrect";if(4===b.length&&e(0)&&e(1)&&e(2)&&e(3))return L.isZero(d(b,0,2)-d(b,1,3))?"circle":"ellipse"}return"path"}function g(a){var b=e(a),a=a._children;b.fill="none";for(var b=c("g",b),d=0,g=a.length;d<g;d++){var f=a[d].exportSvg();
f&&b.appendChild(f)}return b}var h=k.formatFloat,j={group:g,layer:g,path:function(b){var e=b._segments,g=b.getPosition(!0),j=f(b,e),s;s=j;s=(s="rect"===s?e[1]._point.add(e[2]._point).divide(2):"roundrect"===s?e[3]._point.add(e[4]._point).divide(2):"circle"===s||"ellipse"===s?e[1]._point:null)&&s.subtract(g).getAngle()+90;s=L.isZero(s||0)?0:s;var k;switch(j){case "empty":return null;case "path":k=function(b,c,d){var e=b._point,g=c._point,b=b._handleOut,c=c._handleIn;b.isZero()&&c.isZero()?d||w.push("L"+
a(g)):(d=g.subtract(e),w.push("c"+a(b),a(d.add(c)),a(d)))};var w=[],n=b._style;w.push("M"+a(e[0]._point));i=0;for(l=e.length-1;i<l;i++)k(e[i],e[i+1],!1);(b._closed&&n._strokeColor||n._fillColor)&&k(e[e.length-1],e[0],!0);b._closed&&w.push("z");k={d:w.join(" ")};break;case "polyline":case "polygon":b=[];i=0;for(l=e.length;i<l;i++)b.push(a(e[i]._point));k={points:b.join(" ")};break;case "rect":b=d(e,0,3);k=d(e,0,1);e=e[1]._point.rotate(-s,g);k={x:e.x,y:e.y,width:b,height:k};break;case "roundrect":j=
"rect";b=d(e,1,6);k=d(e,0,3);var n=(b-d(e,0,7))/2,va=(k-d(e,1,2))/2,Pb=e[3]._point,e=Pb.subtract(e[4]._point.subtract(Pb).normalize(n)).rotate(-s,g);k={x:e.x,y:e.y,width:b,height:k,rx:n,ry:va};break;case "line":b=e[0]._point;e=e[e.length-1]._point;k={x1:b._x,y1:b._y,x2:e._x,y2:e._y};break;case "circle":e=d(e,0,2)/2;k={cx:g.x,cy:g.y,r:e};break;case "ellipse":n=d(e,2,0)/2,va=d(e,3,1)/2,k={cx:g.x,cy:g.y,rx:n,ry:va}}s&&(k.transform="rotate("+h(s)+","+a(g)+")");return c(j,k)},pointtext:function(a){var b=
e(a,!0),d=a._style;null!=d._font&&(b["font-family"]=d._font);null!=d._fontSize&&(b["font-size"]=d._fontSize);b=c("text",b);b.textContent=a._content;return b}};O.inject({exportSvg:function(){var a=j[this._type],a=a&&a(this,this._type),c;if(c=a){var d={},e=this._style,g=(c=this.getParent())&&c._style;null!=this._name&&(d.id=this._name);k.each(Xb.properties,function(a){var b=e[a.get]();if(!g||!k.equals(g[a.get](),b))"color"===a.type&&(null!=b&&1>b.getAlpha())&&(d[a.attribute+"-opacity"]=b.getAlpha()),
d[a.attribute]=null==b?"none":"color"===a.type?b.toCss(!0):"array"===a.type?b.join(","):"number"===a.type?h(b):b});null!=this._opacity&&1>this._opacity&&(d.opacity=this._opacity);null!=this._visibility&&!this._visibility&&(d.visibility="hidden");c=b(a,d)}return c}});fb.inject({exportSvg:function(){for(var a=c("svg"),b=this.layers,d=0,e=b.length;d<e;d++)a.appendChild(b[d].exportSvg());return a}})};new function(){function a(a,b,c,d){return(a=(!c||null!=a.getAttribute(b))&&a[b]&&a[b].baseVal)?void 0!==
d?d<a.numberOfItems?k.pick((a=a.getItem(d)).value,a):null:k.pick(a.value,a):null}function b(b,c,d,e,g){c=a(b,c,e,g);d=a(b,d,e,g);return e&&null==c&&null==d?null:n.create(c||0,d||0)}function c(b,c,d,e,g){c=a(b,c,e,g);d=a(b,d,e,g);return e&&null==c&&null==d?null:v.create(c||0,d||0)}function d(a,b){return"none"===a?null:"number"===b?k.toFloat(a):"array"===b?a.split(/[\s,]+/g).map(parseFloat):"color"===b&&j(a)||a}function e(a,b){b.setClipMask(!0);return new ma(b,a)}function f(a,b){for(var c=a.childNodes,
d="clippath"===b,e=d?new Ba:new ma,g=0,f=c.length;g<f;g++){var h=c[g],j;if(1==h.nodeType&&(j=t(h)))d&&j instanceof Ba?(e.addChildren(j.removeChildren()),j.remove()):j instanceof la||e.addChild(j)}"defs"==b&&(e.remove(),e=null);return e}function g(a,b){var c=new M,d=a.points;c.moveTo(d.getItem(0));for(var e=1,g=d.numberOfItems;e<g;e++)c.lineTo(d.getItem(e));"polygon"===b&&c.closePath();return c}function h(c,d){for(var e=c.childNodes,g=[],f=0,h=e.length;f<h;f++){var j=e[f];1==j.nodeType&&g.push(p(new Qa,
j))}var e=new ib(g),m;"radialgradient"==d?(e.type="radial",g=b(c,"cx","cy"),f=g.add(a(c,"r"),0),m=b(c,"fx","fy",!0)):(g=b(c,"x1","y1"),f=b(c,"x2","y2"));p(new Yb(e,g,f,m),c);return null}function j(a){return(a=a.match(/\(#([^)']+)/))&&s[a[1]]}function p(a,b){for(var c=0,d=b.style.length;c<d;c++)var e=b.style[c],a=m(a,b,e,b.style[k.camelize(e)]);c=0;for(d=b.attributes.length;c<d;c++)e=b.attributes[c],a=m(a,b,e.name,e.value);return a}function m(a,b,g,f){if(null==f)return a;var h=Xb.attributes[g];if(h)a._style[h.set](d(f,
h.type));else switch(g){case "id":s[f]=a;a.setName&&a.setName(f);break;case "clip-path":a=e(a,j(f).clone().reduce());break;case "gradientTransform":case "transform":f=b[g].baseVal;b=new K;g=0;for(h=f.numberOfItems;g<h;g++){var m=f.getItem(g).matrix;b.concatenate(new K(m.a,m.b,m.c,m.d,m.e,m.f))}a.transform(b);break;case "stop-opacity":case "opacity":b=k.toFloat(f);"stop-opacity"===g?a.color.setAlpha(b):a.setOpacity(b);break;case "fill-opacity":case "stroke-opacity":(b=a["fill-opacity"==g?"getFillColor":
"getStrokeColor"]())&&b.setAlpha(k.toFloat(f));break;case "visibility":a.setVisible("visible"===f);break;case "font":case "font-family":case "font-size":case "text-anchor":q(a,b,g,f);break;case "stop-color":a.setColor(f);break;case "offset":b=f.match(/(.*)%$/);a.setRampPoint(b?b[1]/100:f);break;case "viewBox":if(a instanceof la)break;f=d(f,"array");f=x.create.apply(this,f);b=(g=c(b,"width","height",!0))?f.getSize().divide(g):1;h=f.getPoint();b=(new K).translate(h).scale(b);a.transform(b.createInverse());
g&&f.setSize(g);f.setPoint(0);a=e(a,new M.Rectangle(f))}return a}function q(a,b,c,d){if(a instanceof Pa)switch(c){case "font":var e=document.createElement("span");e.style.font=d;for(var g=0;g<e.style.length;g++)c=e.style[g],a=m(a,b,c,e.style[c]);break;case "font-family":a.setFont(d.split(",")[0].replace(/^\s+|\s+$/g,""));break;case "font-size":a.setFontSize(k.toFloat(d));break;case "text-anchor":a.setJustification({start:"left",middle:"center",end:"right"}[d])}else if(a instanceof ma){a=a._children;
g=0;for(e=a.length;g<e;g++)q(a[g],b,c,d)}}function t(a){var b=a.nodeName.toLowerCase(),c=A[b];return(b=c&&c(a,b))&&p(b,a)}var s={},A={g:f,svg:f,clippath:f,polygon:g,polyline:g,path:function(a){for(var b=new M,a=a.pathSegList,c,d,e=0,g=a.numberOfItems;e<g;e++){var f=a.getItem(e),h=f.pathSegType,j=1==h%2;if(0!==h){b.isEmpty()||(d=b.getLastSegment().getPoint());var m=j&&!b.isEmpty()?d:n.create(0,0),p=(12==h||13==h)&&"y"||(14==h||15==h)&&"x";p&&(f[p]=j?0:d[p]);j=n.create(f.x,f.y).add(m);switch(h){case 1:b.closePath();
break;case 2:case 3:!b.isEmpty()&&!c&&(c=new Ba([b]));c&&(b=new M,c.addChild(b));b.moveTo(j);break;case 4:case 5:case 12:case 13:case 14:case 15:b.lineTo(j);break;case 6:case 7:b.cubicCurveTo(m.add(f.x1,f.y1),m.add(f.x2,f.y2),j);break;case 8:case 9:b.quadraticCurveTo(m.add(f.x1,f.y1),j);break;case 16:case 17:var h=a.getItem(e-1),q=d.add(d.subtract(n.create(h.x2,h.y2).subtract(h.x,h.y).add(d)));b.cubicCurveTo(q,m.add(f.x2,f.y2),j);break;case 18:case 19:for(f=e;0<=f;f--)if(h=a.getItem(f),8===h.pathSegType||
9===h.pathSegType){q=n.create(h.x1,h.y1).subtract(h.x,h.y).add(b._segments[f].getPoint());break}for(;f<e;++f)m=b._segments[f].getPoint(),q=m.add(m.subtract(q));b.quadraticCurveTo(q,j)}}}return c||b},lineargradient:h,radialgradient:h,image:function(d){var e=new Aa(a(d,"href"));e.attach("load",function(){var a=c(d,"width","height");this.setSize(a);this.translate(b(d,"x","y").add(a.divide(2)))});return e},symbol:function(a,b){return new la(p(f(a,b),a))},defs:f,use:function(b){b=(a(b,"href")||"").substring(1);
return(b=s[b])?b instanceof la?b.place():b.clone():null},circle:function(c){return new M.Circle(b(c,"cx","cy"),a(c,"r"))},ellipse:function(a){var d=b(a,"cx","cy"),a=c(a,"rx","ry");return new M.Ellipse(new x(d.subtract(a),d.add(a)))},rect:function(a){var d=b(a,"x","y"),e=c(a,"width","height"),a=c(a,"rx","ry");return new M.RoundRectangle(new x(d,e),a)},line:function(a){return new M.Line(b(a,"x1","y1"),b(a,"x2","y2"))},text:function(a){var c=new Wb(b(a,"x","y",!1,0).add(b(a,"dx","dy",!1,0)));c.setContent(a.textContent||
"");return c}};O.inject({importSvg:function(a){return this.addChild(t(a))}});fb.inject({importSvg:function(a){this.activate();return t(a)}})};var jb=O.extend({initialize:function(a){var b=a instanceof jb;return k.each(this._defaults,function(c,d){c=a&&a[d]||c;this[d]=c&&b&&c.clone?c.clone():c},this)},_getChildren:function(){return this._item instanceof ma&&this._item._children},statics:{create:function(a){var b=k.create(this);b._item=a;return b},extend:function(a){var b="_"+a._style,c=k.capitalize(a._style),
d=a._flags||{},e={};e["get"+c]=function(){return this[b]};e["set"+c]=function(a){this[b].initialize(a)};k.each(a._defaults,function(c,g){var h=/Color$/.test(g),j=k.capitalize(g),p="set"+j,m="get"+j;a[p]=function(a){var c=this._getChildren(),a=h?aa.read(arguments,0,0,!0):a;if(c)for(var e=0,f=c.length;e<f;e++)c[e][b][p](a);else c=this["_"+g],k.equals(c,a)||(h&&(c&&delete c._owner,a&&(a._owner=this._item)),this["_"+g]=a,this._item&&this._item._changed(d[g]||17))};a[m]=function(){var a=this._getChildren(),
c;if(!a)return this["_"+g];for(var d=0,e=a.length;d<e;d++){var f=a[d][b][m]();if(c){if(!k.equals(c,f))return}else c=f}return c};e[p]=function(a){this[b][p](a);return this};e[m]=function(){return this[b][m]()}});a._owner.inject(e);return this.base.apply(this,arguments)}}}),Oa=this.PathStyle=jb.extend({_owner:O,_style:"style",_defaults:{fillColor:void 0,strokeColor:void 0,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",miterLimit:10,dashOffset:0,dashArray:[]},_flags:{strokeWidth:25,strokeCap:25,strokeJoin:25,
miterLimit:25}}),Nc=this.ParagraphStyle=jb.extend({_owner:Pa,_style:"paragraphStyle",_defaults:{justification:"left"},_flags:{justification:5}}),Mc=this.CharacterStyle=Oa.extend({_owner:Pa,_style:"style",_defaults:k.merge(Oa.prototype._defaults,{fillColor:"black",fontSize:12,leading:null,font:"sans-serif"}),_flags:{fontSize:5,leading:5,font:5}},{getLeading:function(){var a=this.base();return null!=a?a:1.2*this.getFontSize()},getFontStyle:function(){return this._fontSize+"px "+this._font}}),aa=this.Color=
k.extend(new function(){var a={gray:["gray"],rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsb:["hue","saturation","brightness"]},b={},c,d=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],e={"rgb-hsb":function(a){var b=a._red,c=a._green,d=a._blue,e=Math.max(b,c,d),f=Math.min(b,c,d),f=e-f;return new kb(0==f?0:60*(e==b?(c-d)/f+(c<d?6:0):e==c?(d-b)/f+2:(b-c)/f+4),0==e?0:f/e,e,a._alpha)},"hsb-rgb":function(a){var b=a._hue/60%6,c=a._saturation,e=a._brightness,f=Math.floor(b),b=b-f,f=
d[f],c=[e,e*(1-c),e*(1-c*b),e*(1-c*(1-b))];return new Z(c[f[0]],c[f[1]],c[f[2]],a._alpha)},"rgb-hsl":function(a){var b=a._red,c=a._green,d=a._blue,e=Math.max(b,c,d),f=Math.min(b,c,d),k=e-f,n=0==k,A=(e+f)/2;return new lb(n?0:60*(e==b?(c-d)/k+(c<d?6:0):e==c?(d-b)/k+2:(b-c)/k+4),n?0:0.5>A?k/(e+f):k/(2-e-f),A,a._alpha)},"hsl-rgb":function(a){var b=a._saturation,c=a._hue/360,d=a._lightness;if(0==b)return new Z(d,d,d,a._alpha);for(var c=[c+1/3,c,c-1/3],b=0.5>d?d*(1+b):d+b-d*b,d=2*d-b,e=[],f=0;3>f;f++){var k=
c[f];0>k&&(k+=1);1<k&&(k-=1);e[f]=1>6*k?d+6*(b-d)*k:1>2*k?b:2>3*k?d+6*(b-d)*(2/3-k):d}return new Z(e[0],e[1],e[2],a._alpha)},"rgb-gray":function(a){return new mb(1-(0.2989*a._red+0.587*a._green+0.114*a._blue),a._alpha)},"gray-rgb":function(a){var b=1-a._gray;return new Z(b,b,b,a._alpha)},"gray-hsb":function(a){return new kb(0,0,1-a._gray,a._alpha)},"gray-hsl":function(a){return new lb(0,0,1-a._gray,a._alpha)}},f={_readNull:!0,_readIndex:!0,initialize:function(a){var d=Array.isArray(a),e=this._type;
if("object"===typeof a&&!d)e?(e=aa.read(arguments).convert(e),this._read&&(e._read=arguments._read)):(e=void 0!==a.red?new Z(a.red,a.green,a.blue,a.alpha):void 0!==a.gray?new mb(a.gray,a.alpha):void 0!==a.lightness?new lb(a.hue,a.saturation,a.lightness,a.alpha):void 0!==a.hue?new kb(a.hue,a.saturation,a.brightness,a.alpha):new Z,this._read&&(e._read=1));else if("string"===typeof a){if(a.match(/^#[0-9a-f]{3,6}$/i))if(d=a.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/),4<=d.length){for(var f=Array(3),m=0;3>
m;m++){var q=d[m+1];f[m]=parseInt(1==q.length?q+q:q,16)/255}d=Z.read(f)}else d=void 0;else d=a,(f=b[d])?d=f.clone():(c||(c=W.getCanvas(v.create(1,1)).getContext("2d"),c.globalCompositeOperation="copy"),c.fillStyle="rgba(0,0,0,0)",c.fillStyle=d,c.fillRect(0,0,1,1),f=c.getImageData(0,0,1,1).data,d=(b[d]=Z.read([f[0]/255,f[1]/255,f[2]/255])).clone());e=e?d.convert(e):d;this._read&&(e._read=1)}else{var n=d?a:Array.prototype.slice.call(arguments),e=e?k.each(this._components,function(a,b){var c=n[b];this["_"+
a]=void 0!==c?c:null},this):new (3<=n.length?Z:mb)(n);this._read&&(e._read=e._components.length)}return e},_serialize:function(){for(var a=[],b=0,c=this._components.length;b<c;b++){var d=this._components[b],e=this["_"+d];("alpha"!==d||null!=e&&1>e)&&a.push(e)}return a},clone:function(){for(var a=k.create(this.constructor),b=this._components,c=0,d=b.length;c<d;c++){var e="_"+b[c];a[e]=this[e]}return a},convert:function(a){var b;return this._type==a?this.clone():(b=e[this._type+"-"+a])?b(this):e["rgb-"+
a](e[this._type+"-rgb"](this))},statics:{extend:function(b){if(b._type){var c=a[b._type];b._components=c.concat(["alpha"]);k.each(c,function(a){var b="hue"===a,c=k.capitalize(a),a="_"+a;this["get"+c]=function(){return this[a]};this["set"+c]=function(c){this[a]=b?(c%360+360)%360:Math.min(Math.max(c,0),1);this._changed();return this}},b)}return this.base.apply(this,arguments)},random:function(){return new Z(Math.random(),Math.random(),Math.random())}}};k.each(a,function(a,b){k.each(a,function(a){var c=
k.capitalize(a);f["get"+c]=function(){return this.convert(b)[a]};f["set"+c]=function(c){var d=this.convert(b);d[a]=c;for(var d=d.convert(this._type),c=0,e=this._components.length;c<e;c++){var f=this._components[c];this[f]=d[f]}}})});return f},{_changed:function(){this._css=null;this._owner&&this._owner._changed(17)},getType:function(){return this._type},getComponents:function(){for(var a=this._components.length,b=Array(a),c=0;c<a;c++)b[c]=this["_"+this._components[c]];return b},getAlpha:function(){return null!=
this._alpha?this._alpha:1},setAlpha:function(a){this._alpha=null==a?null:Math.min(Math.max(a,0),1);this._changed();return this},hasAlpha:function(){return null!=this._alpha},equals:function(a){if(a&&a._type===this._type){for(var b=0,c=this._components.length;b<c;b++){var d="_"+this._components[b];if(this[d]!==a[d])return!1}return!0}return!1},toString:function(){for(var a=[],b=k.formatFloat,c=0,d=this._components.length;c<d;c++){var e=this._components[c],f=this["_"+e];"alpha"===e&&null==f&&(f=1);a.push(e+
": "+b(f))}return"{ "+a.join(", ")+" }"},toCss:function(a){var b=this._css;if(!b||a){var c=this.convert("rgb"),b=a?1:c.getAlpha(),c=[Math.round(255*c._red),Math.round(255*c._green),Math.round(255*c._blue)];1>b&&c.push(b);b=(4==c.length?"rgba(":"rgb(")+c.join(", ")+")";a||(this._css=b)}return b},getCanvasStyle:function(){return this.toCss()}}),mb=this.GrayColor=aa.extend({_type:"gray"}),Z=this.RgbColor=this.RGBColor=aa.extend({_type:"rgb"}),kb=this.HsbColor=this.HSBColor=aa.extend({_type:"hsb"}),lb=
this.HslColor=this.HSLColor=aa.extend({_type:"hsl"}),Yb=this.GradientColor=aa.extend({initialize:function(a,b,c,d){this.gradient=a||new ib;this.gradient._addOwner(this);this.setOrigin(b);this.setDestination(c);d&&this.setHilite(d)},clone:function(){return new Yb(this.gradient,this._origin,this._destination,this._hilite)},getOrigin:function(){return this._origin},setOrigin:function(a){this._origin=a=n.read(arguments,0,0,!0);this._destination&&(this._radius=this._destination.getDistance(this._origin));
this._changed();return this},getDestination:function(){return this._destination},setDestination:function(a){this._destination=a=n.read(arguments,0,0,!0);this._radius=this._destination.getDistance(this._origin);this._changed();return this},getHilite:function(){return this._hilite},setHilite:function(a){var a=n.read(arguments,0,0,!0),b=a.subtract(this._origin);this._hilite=b.getLength()>this._radius?this._origin.add(b.normalize(this._radius-0.1)):a;this._changed();return this},getCanvasStyle:function(a){if("linear"===
this.gradient.type)a=a.createLinearGradient(this._origin.x,this._origin.y,this._destination.x,this._destination.y);else var b=this._hilite||this._origin,a=a.createRadialGradient(b.x,b.y,0,this._origin.x,this._origin.y,this._radius);for(var b=0,c=this.gradient._stops.length;b<c;b++){var d=this.gradient._stops[b];a.addColorStop(d._rampPoint,d._color.toCss())}return a},equals:function(a){return a==this||a&&a._type===this._type&&this.gradient.equals(a.gradient)&&this._origin.equals(a._origin)&&this._destination.equals(a._destination)},
transform:function(a){a._transformPoint(this._origin,this._origin,!0);a._transformPoint(this._destination,this._destination,!0);this._hilite&&a._transformPoint(this._hilite,this._hilite,!0);this._radius=this._destination.getDistance(this._origin)}}),ib=this.Gradient=k.extend({initialize:function(a,b){this.setStops(a||["white","black"]);this.type=b||"linear"},_changed:function(){for(var a=0,b=this._owners&&this._owners.length;a<b;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||
(this._owners=[]);this._owners.push(a)},_removeOwner:function(a){a=this._owners?this._owners.indexOf(a):-1;-1!=a&&(this._owners.splice(a,1),0==this._owners.length&&delete this._owners)},clone:function(){for(var a=[],b=0,c=this._stops.length;b<c;b++)a[b]=this._stops[b].clone();return new ib(a,this.type)},getStops:function(){return this._stops},setStops:function(a){if(this.stops)for(var b=0,c=this._stops.length;b<c;b++)delete this._stops[b]._owner;if(2>a.length)throw Error("Gradient stop list needs to contain at least two stops.");
this._stops=Qa.readAll(a,0,!0);b=0;for(c=this._stops.length;b<c;b++)a=this._stops[b],a._owner=this,a._defaultRamp&&a.setRampPoint(b/(c-1));this._changed();return this},equals:function(a){if(a.type!=this.type)return!1;if(this._stops.length==a._stops.length){for(var b=0,c=this._stops.length;b<c;b++)if(!this._stops[b].equals(a._stops[b]))return!1;return!0}return!1}}),Qa=this.GradientStop=k.extend({initialize:function(a,b){if(a){var c,d;void 0===b&&Array.isArray(a)?(c=a[0],d=a[1]):a.color?(c=a.color,
d=a.rampPoint):(c=a,d=b);this.setColor(c);this.setRampPoint(d)}},clone:function(){return new Qa(this._color.clone(),this._rampPoint)},_changed:function(){this._owner&&this._owner._changed(17)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(a){this._defaultRamp=null==a;this._rampPoint=a||0;this._changed()},getColor:function(){return this._color},setColor:function(a){this._color=aa.read(arguments);this._color===a&&(this._color=a.clone());this._color._owner=this;this._changed()},
equals:function(a){return a==this||a instanceof Qa&&this._color.equals(a._color)&&this._rampPoint==a._rampPoint}}),G=new function(){function a(b,c){for(var d=[],h=0,j=b&&b.length;h<j;){var p=b[h++];if("string"===typeof p)p=document.createElement(p);else if(!p||!p.nodeType)continue;k.isPlainObject(b[h])&&G.set(p,b[h++]);Array.isArray(b[h])&&a(b[h++],p);c&&c.appendChild(p);d.push(p)}return d}var b=/^(checked|value|selected|disabled)$/i,c={text:"textContent",html:"innerHTML"},d={lineHeight:1,zoom:1,
zIndex:1,opacity:1};return{create:function(b,c){var d=Array.isArray(b),d=a(d?b:arguments,d?c:null);return 1==d.length?d[0]:d},find:function(a,b){return(b||document).querySelector(a)},findAll:function(a,b){return(b||document).querySelectorAll(a)},get:function(a,d){return a?b.test(d)?"value"===d||"string"!==typeof a[d]?a[d]:!0:d in c?a[c[d]]:a.getAttribute(d):null},set:function(a,d,g){if("string"!==typeof d)for(var h in d)d.hasOwnProperty(h)&&this.set(a,h,d[h]);else a&&void 0!==g&&(b.test(d)?a[d]=g:
d in c?a[c[d]]=g:"style"===d?this.setStyle(a,g):"events"===d?I.add(a,g):a.setAttribute(d,g));return a},getStyle:function(a,b){var c=a.ownerDocument.defaultView.getComputedStyle(a,"");return a.style[b]||c&&c[b]||null},setStyle:function(a,b,c){if("string"!==typeof b)for(var h in b)b.hasOwnProperty(h)&&this.setStyle(a,h,b[h]);else/^-?[\d\.]+$/.test(c)&&!(b in d)&&(c+="px"),a.style[b]=c;return a},hasClass:function(a,b){return RegExp("\\s*"+b+"\\s*").test(a.className)},addClass:function(a,b){a.className=
(a.className+" "+b).trim()},removeClass:function(a,b){a.className=a.className.replace(RegExp("\\s*"+b+"\\s*")," ").trim()},remove:function(a){a.parentNode&&a.parentNode.removeChild(a)},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},getBounds:function(a,b){var c=a.getBoundingClientRect(),d=a.ownerDocument,j=d.body,p=d.documentElement,m=c.left-(p.clientLeft||j.clientLeft||0),q=c.top-(p.clientTop||j.clientTop||0);b||(d=d.defaultView,m+=d.pageXOffset||p.scrollLeft||j.scrollLeft,
q+=d.pageYOffset||p.scrollTop||j.scrollTop);return new x(m,q,c.width,c.height)},getViewportBounds:function(a){var b=a.ownerDocument,a=b.defaultView,b=b.documentElement;return x.create(0,0,a.innerWidth||b.clientWidth,a.innerHeight||b.clientHeight)},getOffset:function(a,b){return this.getBounds(a,b).getPoint()},getSize:function(a){return this.getBounds(a,!0).getSize()},isInvisible:function(a){return this.getSize(a).equals([0,0])},isInView:function(a){return!this.isInvisible(a)&&this.getViewportBounds(a).intersects(this.getBounds(a,
!0))}}},I={add:function(a,b){for(var c in b){var d=b[c];a.addEventListener?a.addEventListener(c,d,!1):a.attachEvent&&a.attachEvent("on"+c,d.bound=function(){d.call(a,window.event)})}},remove:function(a,b){for(var c in b){var d=b[c];a.removeEventListener?a.removeEventListener(c,d,!1):a.detachEvent&&a.detachEvent("on"+c,d.bound)}},getPoint:function(a){a=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return n.create(a.pageX||a.clientX+document.documentElement.scrollLeft,
a.pageY||a.clientY+document.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getOffset:function(a,b){return I.getPoint(a).subtract(G.getOffset(b||I.getTarget(a)))},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},stop:function(a){I.stopPropagation(a);I.preventDefault(a)}};I.requestAnimationFrame=new function(){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;a&&a(function(b){null==b&&(a=null)});var b=[],c=!0,d;I.add(window,{focus:function(){c=!0},blur:function(){c=!1}});return function(e,f){if(a)return a(e,f);b.push([e,f]);d||(d=setInterval(function(){for(var a=b.length-1;0<=a;a--){var d=b[a],e=d[0],d=d[1];if(!d||("true"==na.getAttribute(d,"keepalive")||c)&&G.isInView(d))b.splice(a,1),e(Date.now())}},1E3/60))}};var H=this.View=k.extend(wa,{initialize:function(a){this._scope=
paper;this._project=paper.project;this._element=a;var b;this._id=a.getAttribute("id");null==this._id&&a.setAttribute("id",this._id="view-"+H._id++);I.add(a,this._viewHandlers);if(na.hasAttribute(a,"resize")){var c=G.getOffset(a,!0),d=this;b=G.getViewportBounds(a).getSize().subtract(c);this._windowHandlers={resize:function(){G.isInvisible(a)||(c=G.getOffset(a,!0));d.setViewSize(G.getViewportBounds(a).getSize().subtract(c))}};I.add(window,this._windowHandlers)}else b=G.isInvisible(a)?v.create(parseInt(a.getAttribute("width")),
parseInt(a.getAttribute("height"))):G.getSize(a);a.width=b.width;a.height=b.height;if(na.hasAttribute(a,"stats")){this._stats=new Stats;var e=this._stats.domElement,f=e.style,c=G.getOffset(a);f.position="absolute";f.left=c.x+"px";f.top=c.y+"px";document.body.appendChild(e)}H._views.push(this);H._viewsById[this._id]=this;this._viewSize=gb.create(this,"setViewSize",b.width,b.height);this._matrix=new K;this._zoom=1;H._focused||(H._focused=this);this._frameItems={};this._frameItemCount=0},remove:function(){if(!this._project)return!1;
H._focused==this&&(H._focused=null);H._views.splice(H._views.indexOf(this),1);delete H._viewsById[this._id];this._project.view==this&&(this._project.view=null);I.remove(this._element,this._viewHandlers);I.remove(window,this._windowHandlers);this._element=this._project=null;this.detach("frame");this._frameItems={};return!0},_events:{onFrame:{install:function(){this._requested||(this._animate=!0,this._handleFrame(!0))},uninstall:function(){this._animate=!1}},onResize:{}},_animate:!1,_time:0,_count:0,
_handleFrame:function(a){this._requested=!1;if(this._animate){paper=this._scope;if(a){this._requested=!0;var b=this;I.requestAnimationFrame(function(){b._handleFrame(!0)},this._element)}var a=Date.now()/1E3,c=this._before?a-this._before:0;this._before=a;this.fire("frame",k.merge({delta:c,time:this._time+=c,count:this._count++}));this._stats&&this._stats.update();this.draw(!0)}},_animateItem:function(a,b){var c=this._frameItems;b?(c[a._id]={item:a,time:0,count:0},1==++this._frameItemCount&&this.attach("frame",
this._handleFrameItems)):(delete c[a._id],0==--this._frameItemCount&&this.detach("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var b in this._frameItems){var c=this._frameItems[b];c.item.fire("frame",k.merge(a,{time:c.time+=a.delta,count:c.count++}))}},_redraw:function(){this._redrawNeeded=!0;this._animate?this._handleFrame():this.draw()},_transform:function(a){this._matrix.preConcatenate(a);this._inverse=this._bounds=null;this._redraw()},getElement:function(){return this._element},
getViewSize:function(){return this._viewSize},setViewSize:function(a){var a=v.read(arguments),b=a.subtract(this._viewSize);b.isZero()||(this._element.width=a.width,this._element.height=a.height,this._viewSize.set(a.width,a.height,!0),this._bounds=null,this._redrawNeeded=!0,this.fire("resize",{size:a,delta:b}),this._redraw())},getBounds:function(){this._bounds||(this._bounds=this._getInverse()._transformBounds(new x(new n,this._viewSize)));return this._bounds},getSize:function(){return this.getBounds().getSize()},
getCenter:function(){return this.getBounds().getCenter()},setCenter:function(a){this.scrollBy(n.read(arguments).subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(a){this._transform((new K).scale(a/this._zoom,this.getCenter()));this._zoom=a},isVisible:function(){return G.isInView(this._element)},scrollBy:function(a){this._transform((new K).translate(n.read(arguments).negate()))},projectToView:function(a){return this._matrix._transformPoint(n.read(arguments))},viewToProject:function(a){return this._getInverse()._transformPoint(n.read(arguments))},
_getInverse:function(){this._inverse||(this._inverse=this._matrix.createInverse());return this._inverse}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a){"string"===typeof a&&(a=document.getElementById(a));return new Oc(a)}}},new function(){function a(){if(!H._focused||!H._focused.isVisible())for(var a=0,b=H._views.length;a<b;a++){var c=H._views[a];if(c&&c.isVisible()){H._focused=j=c;break}}}function b(a){var b=H._focused=H._viewsById[I.getTarget(a).getAttribute("id")];g=b.viewToProject(I.getOffset(a,
b._element));p=!0;b._onMouseDown&&b._onMouseDown(a,g);(f=b._scope._tool)&&f._onHandleEvent("mousedown",g,a);b.draw(!0)}function c(b){var c;p||((c=H._viewsById[I.getTarget(b).getAttribute("id")])?(h=H._focused,H._focused=j=c):j&&j==H._focused&&(H._focused=h,a()));if(c=c||H._focused){var d=b&&c.viewToProject(I.getOffset(b,c._element));c._onMouseMove&&c._onMouseMove(b,d);if(f=c._scope._tool){var e=!(f.onMouseDrag||!f.onMouseMove);p&&!e?(g=d||g)&&f._onHandleEvent("mousedrag",g,b)&&I.stop(b):(!p||e)&&
f._onHandleEvent("mousemove",d,b)&&I.stop(b)}c.draw(!0)}}function d(a){var b=H._focused;if(b&&p){var c=b.viewToProject(I.getOffset(a,b._element));g=null;p=!1;b._onMouseUp&&b._onMouseUp(a,c);f&&f._onHandleEvent("mouseup",c,a)&&I.stop(a);b.draw(!0)}}function e(a){p&&I.stop(a)}var f,g,h,j,p=!1;I.add(document,{mousemove:c,mouseup:d,touchmove:c,touchend:d,selectstart:e,scroll:a});I.add(window,{load:a});return{_viewHandlers:{mousedown:b,touchstart:b,selectstart:e},statics:{updateFocus:a}}}),Oc=H.extend({initialize:function(a){if(!(a instanceof
HTMLCanvasElement)){var b=v.read(arguments,1);b.isZero()&&(b=v.create(1024,768));a=W.getCanvas(b)}this._context=a.getContext("2d");this._eventCounters={};this.base(a)},draw:function(a){if(a&&!this._redrawNeeded)return!1;var a=this._context,b=this._viewSize;a.clearRect(0,0,b._width+1,b._height+1);this._project.draw(a,this._matrix);this._redrawNeeded=!1;return!0}},new function(){function a(a,b,c,d,e,f){for(var g=d,h,j=!1;g&&(!g.responds(a)||!(h||(h=new Pc(a,b,c,d,e?c.subtract(e):null)),(j=g.fire(a,
h)||j)&&(!f||h._stopped)));)g=g.getParent();return j}function b(b,d,e,f,g){if(b._eventCounters[d]&&(b=(b=b._project.hitTest(f,c))&&b.item))return"mousemove"==d&&b!=j&&(g=f),("mousemove"!=d||!p)&&a(d,e,f,b,g),b}var c={fill:!0,stroke:!0,tolerance:0},d,e,f,g,h,j,p,m,k;return{_onMouseDown:function(a,c){var j=b(this,"mousedown",a,c);m=h==j&&300>Date.now()-k;g=h=j;d=e=f=c;p=g&&g.responds("mousedrag")},_onMouseUp:function(c,h){var n=b(this,"mouseup",c,h);p&&(e&&!e.equals(h)&&a("mousedrag",c,h,g,e),n!=g&&
(f=h,a("mousemove",c,h,n,f)));n==g&&(k=Date.now(),a(m?"doubleclick":"click",c,d,j),m=!1);g=null;p=!1},_onMouseMove:function(c,d){g&&a("mousedrag",c,d,g,e);var h=b(this,"mousemove",c,d,f);e=f=d;h!=j&&(a("mouseleave",c,d,j),j=h,a("mouseenter",c,d,h))}}}),nb=this.Event=k.extend({initialize:function(a){this.event=a},preventDefault:function(){this._prevented=!0;I.preventDefault(this.event);return this},stopPropagation:function(){this._stopped=!0;I.stopPropagation(this.event);return this},stop:function(){return this.stopPropagation().preventDefault()},
getModifiers:function(){return Qc.modifiers}}),Rc=this.KeyEvent=nb.extend({initialize:function(a,b,c,d){this.base(d);this.type=a?"keydown":"keyup";this.key=b;this.character=c},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Qc=this.Key=new function(){function a(a,c,d,f){var d=String.fromCharCode(d),c=b[c]||d.toLowerCase(),m=a?"keydown":"keyup",k=H._focused,n=k&&k.isVisible()&&k._scope,n=n&&n._tool;e[c]=
a;n&&n.responds(m)&&(n.fire(m,new Rc(a,c,d,f)),k&&k.draw(!0))}var b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},c=k.merge({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),d={},e={},f;I.add(document,{keydown:function(e){var h=e.which||e.keyCode,j=b[h];if(j){if((j=k.camelize(j))in c)c[j]=!0;d[h]=0;a(!0,
h,null,e)}else f=h},keypress:function(b){if(null!=f){var c=b.which||b.keyCode;d[f]=c;a(!0,f,c,b);f=null}},keyup:function(e){var f=e.which||e.keyCode,j=b[f],p;if(j&&(p=k.camelize(j))in c)c[p]=!1;null!=d[f]&&(a(!1,f,d[f],e),delete d[f])}});return{modifiers:c,isDown:function(a){return!!e[a]}}},Pc=this.MouseEvent=nb.extend({initialize:function(a,b,c,d,e){this.base(b);this.type=a;this.point=c;this.target=d;this.delta=e},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+
this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}});this.Palette=k.extend(wa,{_events:["onChange"],initialize:function(a,b,c){this._element=(G.find(".palettejs-panel")||G.find("body").appendChild(G.create("div",{"class":"palettejs-panel"}))).appendChild(G.create("table",{"class":"palettejs-pane"}));this._title=a;c||(c={});for(var d in this._components=b)a=b[d],a instanceof Zb||(null==a.value&&(a.value=c[d]),a.name=d,a=b[d]=new Zb(a)),this._element.appendChild(a._element),
a._palette=this,void 0===c[d]&&(c[d]=a.value);this._values=k.each(c,function(a,d){var g=b[d];g&&k.define(c,d,{enumerable:!0,configurable:!0,writable:!0,get:function(){return g._value},set:function(a){g.setValue(a)}})});window.paper&&paper.palettes.push(this)},reset:function(){for(var a in this._components)this._components[a].reset()},remove:function(){G.remove(this._element)}});var Zb=this.Component=k.extend(wa,{_events:["onChange","onClick"],_types:{"boolean":{type:"checkbox",value:"checked"},string:{type:"text"},
number:{type:"number",number:!0},button:{type:"button"},text:{tag:"div",value:"text"},slider:{type:"range",number:!0},list:{tag:"select",options:function(){G.removeChildren(this._inputItem);G.create(k.each(this._options,function(a){this.push("option",{value:a,text:a})},[]),this._inputItem)}}},initialize:function(a){this._type=a.type in this._types?a.type:"options"in a?"list":"onClick"in a?"button":typeof a.value;this._info=this._types[this._type]||{type:this._type};var b=this,c=!1;this._inputItem=
G.create(this._info.tag||"input",{type:this._info.type,events:{change:function(){b.setValue(G.get(this,b._info.value||"value"));c&&(b._palette.fire("change",b,b.name,b._value),b.fire("change",b._value))},click:function(){b.fire("click")}}});this._element=G.create("tr",[this._labelItem=G.create("td"),"td",[this._inputItem]]);k.each(a,function(a,b){this[b]=a},this);this._defaultValue=this._value;c=!0},getType:function(){return this._type},getLabel:function(){return this._label},setLabel:function(a){this._label=
a;G.set(this._labelItem,"text",a+":")},getOptions:function(){return this._options},setOptions:function(a){this._options=a;this._info.options&&this._info.options.call(this)},getValue:function(){return this._value},setValue:function(a){var b=this._info.value||"value";G.set(this._inputItem,b,a);a=G.get(this._inputItem,b);this._value=this._info.number?k.toFloat(a):a},getRange:function(){return[k.toFloat(G.get(this._inputItem,"min")),k.toFloat(G.get(this._inputItem,"max"))]},setRange:function(a,b){var c=
Array.isArray(a)?a:[a,b];G.set(this._inputItem,{min:c[0],max:c[1]})},getMin:function(){return this.getRange()[0]},setMin:function(a){this.setRange(a,this.getMax())},getMax:function(){return this.getRange()[1]},setMax:function(a){this.setRange(this.getMin(),a)},getStep:function(){return k.toFloat(G.get(this._inputItem,"step"))},setStep:function(a){G.set(this._inputItem,"step",a)},reset:function(){this.setValue(this._defaultValue)}}),Ca=this.ToolEvent=nb.extend({_item:null,initialize:function(a,b,c){this.tool=
a;this.type=b;this.event=c},_choosePoint:function(a,b){return a?a:b?b.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&
this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this.middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=
this.tool._scope.project.hitTest(this.getPoint());if(a){for(var a=a.item,b=a._parent;b instanceof ma&&!(b instanceof za)||b instanceof Ba;)a=b,b=b._parent;this._item=a}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ya=this.Tool=Qb.extend({_list:"tools",_reference:"_tool",_events:"onActivate onDeactivate onEditOptions onMouseDown onMouseUp onMouseDrag onMouseMove onKeyDown onKeyUp".split(" "),
initialize:function(){this.base();this._firstMove=!0;this._downCount=this._count=0},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a;null!=this._minDistance&&(null!=this._maxDistance&&this._minDistance>this._maxDistance)&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a;null!=this._minDistance&&(null!=this._maxDistance&&this._maxDistance<this._minDistance)&&(this._minDistance=
a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._maxDistance=this._minDistance=a},_updateEvent:function(a,b,c,d,e,f,g){if(!e){if(null!=c||null!=d){var h=null!=c?c:0,c=b.subtract(this._point),j=c.getLength();if(j<h)return!1;d=null!=d?d:0;if(0!=d)if(j>d)b=this._point.add(c.normalize(d));else if(g)return!1}if(f&&b.equals(this._point))return!1}this._lastPoint=e&&"mousemove"==a?b:this._point;this._point=b;switch(a){case "mousedown":this._lastPoint=
this._downPoint;this._downPoint=this._point;this._downCount++;break;case "mouseup":this._lastPoint=this._downPoint}this._count=e?0:this._count+1;return!0},_onHandleEvent:function(a,b,c){paper=this._scope;var d=ya._removeSets;if(d){"mouseup"===a&&(d.mousedrag=null);var e=d[a];if(e){for(var f in e){var g=e[f],h;for(h in d){var j=d[h];j&&(j!=e&&j[g._id])&&delete j[g._id]}g.remove()}d[a]=null}}d=!1;switch(a){case "mousedown":this._updateEvent(a,b,null,null,!0,!1,!1);this.responds(a)&&(d=this.fire(a,new Ca(this,
a,c)));break;case "mousedrag":for(f=e=!1;this._updateEvent(a,b,this.minDistance,this.maxDistance,!1,e,f);)this.responds(a)&&(d=this.fire(a,new Ca(this,a,c))),f=e=!0;break;case "mouseup":if((this._point.x!=b.x||this._point.y!=b.y)&&this._updateEvent("mousedrag",b,this.minDistance,this.maxDistance,!1,!1,!1))this.responds("mousedrag")&&(d=this.fire("mousedrag",new Ca(this,a,c)));this._updateEvent(a,b,null,this.maxDistance,!1,!1,!1);this.responds(a)&&(d=this.fire(a,new Ca(this,a,c)));this._updateEvent(a,
b,null,null,!0,!1,!1);this._firstMove=!0;break;case "mousemove":for(;this._updateEvent(a,b,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)this.responds(a)&&(d=this.fire(a,new Ca(this,a,c))),this._firstMove=!1}return d}}),W={canvases:[],getCanvas:function(a){if(this.canvases.length){var b=this.canvases.pop();b.width!=a.width||b.height!=a.height?(b.width=a.width,b.height=a.height):b.getContext("2d").clearRect(0,0,a.width+1,a.height+1)}else b=document.createElement("canvas"),b.width=a.width,
b.height=a.height;return b},returnCanvas:function(a){this.canvases.push(a)}},L=new function(){function a(a){return 0<a?f(a,1/3):0>a?-f(-a,1/3):0}var b=[[0.5773502691896257],[0,0.7745966692414834],[0.33998104358485626,0.8611363115940526],[0,0.5384693101056831,0.906179845938664],[0.2386191860831969,0.6612093864662645,0.932469514203152],[0,0.4058451513773972,0.7415311855993945,0.9491079123427585],[0.1834346424956498,0.525532409916329,0.7966664774136267,0.9602898564975363],[0,0.3242534234038089,0.6133714327005904,
0.8360311073266358,0.9681602395076261],[0.14887433898163122,0.4333953941292472,0.6794095682990244,0.8650633666889845,0.9739065285171717],[0,0.26954315595234496,0.5190961292068118,0.7301520055740494,0.8870625997680953,0.978228658146057],[0.1252334085114689,0.3678314989981802,0.5873179542866175,0.7699026741943047,0.9041172563704749,0.9815606342467192],[0,0.2304583159551348,0.44849275103644687,0.6423493394403402,0.8015780907333099,0.9175983992229779,0.9841830547185881],[0.10805494870734367,0.31911236892788974,
0.5152486363581541,0.6872929048116855,0.827201315069765,0.9284348836635735,0.9862838086968123],[0,0.20119409399743451,0.3941513470775634,0.5709721726085388,0.7244177313601701,0.8482065834104272,0.937273392400706,0.9879925180204854],[0.09501250983763744,0.2816035507792589,0.45801677765722737,0.6178762444026438,0.755404408355003,0.8656312023878318,0.9445750230732326,0.9894009349916499]],c=[[1],[0.8888888888888888,0.5555555555555556],[0.6521451548625461,0.34785484513745385],[0.5688888888888889,0.47862867049936647,
0.23692688505618908],[0.46791393457269104,0.3607615730481386,0.17132449237917036],[0.4179591836734694,0.3818300505051189,0.27970539148927664,0.1294849661688697],[0.362683783378362,0.31370664587788727,0.22238103445337448,0.10122853629037626],[0.3302393550012598,0.31234707704000286,0.26061069640293544,0.1806481606948574,0.08127438836157441],[0.29552422471475287,0.26926671930999635,0.21908636251598204,0.1494513491505806,0.06667134430868814],[0.2729250867779006,0.26280454451024665,0.23319376459199048,
0.18629021092773426,0.1255803694649046,0.05566856711617366],[0.24914704581340277,0.2334925365383548,0.20316742672306592,0.16007832854334622,0.10693932599531843,0.04717533638651183],[0.2325515532308739,0.22628318026289723,0.2078160475368885,0.17814598076194574,0.13887351021978725,0.09212149983772845,0.04048400476531588],[0.2152638534631578,0.2051984637212956,0.18553839747793782,0.15720316715819355,0.12151857068790319,0.08015808715976021,0.03511946033175186],[0.2025782419255613,0.19843148532711158,
0.1861610000155622,0.16626920581699392,0.13957067792615432,0.10715922046717194,0.07036604748810812,0.03075324199611727],[0.1894506104550685,0.18260341504492358,0.16915651939500254,0.14959598881657674,0.12462897125553388,0.09515851168249279,0.062253523938647894,0.027152459411754096]],d=Math.abs,e=Math.sqrt,f=Math.pow,g=Math.cos,h=Math.PI;return{TOLERANCE:1E-5,EPSILON:1E-11,isZero:function(a){return Math.abs(a)<=this.EPSILON},integrate:function(a,d,e,f){for(var g=b[f-2],h=c[f-2],e=0.5*(e-d),d=e+d,k=
0,n=f+1>>1,f=f&1?h[k++]*a(d):0;k<n;)var r=e*g[k],f=f+h[k++]*(a(d+r)+a(d-r));return e*f},findRoot:function(a,b,c,e,f,g,h){for(var k=0;k<g;k++){var n=a(c),r=n/b(c);if(d(r)<h)return c;r=c-r;0<n?(f=c,c=r<=e?0.5*(e+f):r):(e=c,c=r>=f?0.5*(e+f):r)}},solveQuadratic:function(a,b,c,f,g){if(d(a)<g)return d(b)>=g?(f[0]=-c/b,1):d(c)<g?-1:0;c=b*b-4*a*c;if(0>c)return 0;c=e(c);a*=2;g=0;f[g++]=(-b-c)/a;0<c&&(f[g++]=(-b+c)/a);return g},solveCubic:function(b,c,f,k,n,s){if(d(b)<s)return L.solveQuadratic(c,f,k,n,s);var c=
c/b,f=f/b,r=c*c,w=1/3*(-1/3*r+f),b=0.5*(2/27*c*r-1/3*c*f+k/b),f=w*w*w,k=b*b+f,c=c/3;if(d(k)<s){if(d(b)<s)return n[0]=-c,1;w=a(-b);n[0]=2*w-c;n[1]=-w-c;return 2}if(0>k)return s=1/3*Math.acos(-b/e(-f)),w=2*e(-w),n[0]=w*g(s)-c,n[1]=-w*g(s+h/3)-c,n[2]=-w*g(s-h/3)-c,3;k=e(k);n[0]=a(k-b)-a(k+b)-c;return 1}}},Kc={process:function(a,b,c,d,e){function f(a,b,c,d){d-=0.2989*a+0.587*b+0.114*c;x=a+d;y=b+d;z=c+d;d=0.2989*x+0.587*y+0.114*z;b=m(x,y,z);a=n(x,y,z);0>b&&(b=d-b,x=d+(x-d)*d/b,y=d+(y-d)*d/b,z=d+(z-d)*
d/b);255<a&&(b=255-d,a-=d,x=d+(x-d)*b/a,y=d+(y-d)*b/a,z=d+(z-d)*b/a)}function g(a,b,c,d){var e=[a,b,c],f=n(a,b,c),c=m(a,b,c),c=c==a?0:c==b?1:2,f=f==a?0:f==b?1:2,a=0==m(c,f)?1==n(c,f)?2:1:0;e[f]>e[c]?(e[a]=(e[a]-e[c])*d/(e[f]-e[c]),e[f]=d):e[a]=e[f]=0;e[c]=0;x=e[0];y=e[1];z=e[2]}var h=b.canvas,j=c.getImageData(e.x,e.y,h.width,h.height),k=j.data,b=b.getImageData(0,0,h.width,h.height).data,m=Math.min,n=Math.max,r=Math.abs,s,A,w,C,u,v,x,y,z,D={multiply:function(){x=C*s/255;y=u*A/255;z=v*w/255},screen:function(){x=
255-(255-C)*(255-s)/255;y=255-(255-u)*(255-A)/255;z=255-(255-v)*(255-w)/255},overlay:function(){x=128>C?2*C*s/255:255-2*(255-C)*(255-s)/255;y=128>u?2*u*A/255:255-2*(255-u)*(255-A)/255;z=128>v?2*v*w/255:255-2*(255-v)*(255-w)/255},"soft-light":function(){var a=s*C/255;x=a+C*(255-(255-C)*(255-s)/255-a)/255;a=A*u/255;y=a+u*(255-(255-u)*(255-A)/255-a)/255;a=w*v/255;z=a+v*(255-(255-v)*(255-w)/255-a)/255},"hard-light":function(){x=128>s?2*s*C/255:255-2*(255-s)*(255-C)/255;y=128>A?2*A*u/255:255-2*(255-A)*
(255-u)/255;z=128>w?2*w*v/255:255-2*(255-w)*(255-v)/255},"color-dodge":function(){x=255==s?s:m(255,255*C/(255-s));y=255==A?A:m(255,255*u/(255-A));z=255==w?w:m(255,255*v/(255-w))},"color-burn":function(){x=0==s?0:n(255-255*(255-C)/s,0);y=0==A?0:n(255-255*(255-u)/A,0);z=0==w?0:n(255-255*(255-v)/w,0)},darken:function(){x=C<s?C:s;y=u<A?u:A;z=v<w?v:w},lighten:function(){x=C>s?C:s;y=u>A?u:A;z=v>w?v:w},difference:function(){x=C-s;0>x&&(x=-x);y=u-A;0>y&&(y=-y);z=v-w;0>z&&(z=-z)},exclusion:function(){x=C+
s*(255-C-C)/255;y=u+A*(255-u-u)/255;z=v+w*(255-v-v)/255},hue:function(){g(s,A,w,n(C,u,v)-m(C,u,v));f(x,y,z,0.2989*C+0.587*u+0.114*v)},saturation:function(){g(C,u,v,n(s,A,w)-m(s,A,w));f(x,y,z,0.2989*C+0.587*u+0.114*v)},luminosity:function(){f(C,u,v,0.2989*s+0.587*A+0.114*w)},color:function(){f(s,A,w,0.2989*C+0.587*u+0.114*v)},add:function(){x=m(C+s,255);y=m(u+A,255);z=m(v+w,255)},subtract:function(){x=n(C-s,0);y=n(u-A,0);z=n(v-w,0)},average:function(){x=(C+s)/2;y=(u+A)/2;z=(v+w)/2},negation:function(){x=
255-r(255-s-C);y=255-r(255-A-u);z=255-r(255-w-v)}}[a];if(D){for(var B=0,E=k.length;B<E;B+=4){s=b[B];C=k[B];A=b[B+1];u=k[B+1];w=b[B+2];v=k[B+2];a=b[B+3];h=k[B+3];D();var F=a*d/255,G=1-F;k[B]=F*x+G*C;k[B+1]=F*y+G*u;k[B+2]=F*z+G*v;k[B+3]=a*d+G*h}c.putImageData(j,e.x,e.y)}}},Ra="undefined"==typeof exports?window.acorn={}:exports,E=function(a,b){throw"number"==typeof a&&(a=Sc(z,a)),b+=" ("+a.line+":"+a.column+")",new SyntaxError(b);},Da=function(a){function b(a){if(1==a.length)return c+="return str === "+
JSON.stringify(a[0])+";";c+="switch(str){";for(var b=0;a.length>b;++b)c+="case "+JSON.stringify(a[b])+":";c+="return true}return false;"}var a=a.split(" "),c="",d=[],e=0;a:for(;a.length>e;++e){for(var f=0;d.length>f;++f)if(d[f][0].length==a[e].length){d[f].push(a[e]);continue a}d.push([a[e]])}if(3<d.length){d.sort(function(a,b){return b.length-a.length});c+="switch(str.length){";for(e=0;d.length>e;++e)a=d[e],c+="case "+a[0].length+":",b(a);c+="}"}else b(a);return Function("str",c)},Sa=function(a){return 65>
a?36===a:91>a?!0:97>a?95===a:123>a?!0:170<=a&&$b.test(String.fromCharCode(a))},ac=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:170<=a&&Tc.test(String.fromCharCode(a))},bc=function(){Ta.lastIndex=Ua;var a=Ta.exec(z);return a?a.index+a[0].length:z.length+1},pb=function(){for(;r>=Va;)++ob,Ua=Va,Va=bc();return{line:ob,column:r-Ua}},R=function(a,b){Ea=r;J.locations&&(qb=pb());B=a;rb();ha=b;Wa=ia;sb=a.beforeExpr},rb=function(){for(ia=null;pa>r;){var a=z.charCodeAt(r);if(47===
a)if(a=z.charCodeAt(r+1),42===a)a=z.indexOf("*/",r+=2),-1===a&&E(r-2,"Unterminated comment"),J.trackComments&&(ia||(ia=[])).push(z.slice(r,a)),r=a+2;else{if(47!==a)break;for(var a=r,b=z.charCodeAt(r+=2);pa>r&&10!==b&&13!==b&&8232!==b&&8329!==b;)++r,b=z.charCodeAt(r);J.trackComments&&(ia||(ia=[])).push(z.slice(a,r))}else{if(!(14>a&&8<a)&&!(32===a||160===a)&&!(5760<=a&&Uc.test(String.fromCharCode(a))))break;++r}}},$a=function(a){if(U=r,J.locations&&(tb=pb()),Xa=ia,a)return cc();if(r>=pa)return R(ub);
a=z.charCodeAt(r);if(Sa(a)||92===a)return dc();var b=z.charCodeAt(r+1);switch(a){case 46:return 48<=b&&57>=b?ec(String.fromCharCode(a)):(++r,R(fc));case 40:return++r,R(ca);case 41:return++r,R(ba);case 59:return++r,R(da);case 44:return++r,R(ja);case 91:return++r,R(vb);case 93:return++r,R(wb);case 123:return++r,R(Fa);case 125:return++r,R(qa);case 58:return++r,R(Ga);case 63:return++r,R(gc);case 48:if(120===b||88===b)return r+=2,a=Ha(16),null==a&&E(U+2,"Expected hexadecimal number"),Sa(z.charCodeAt(r))&&
E(r,"Identifier directly after number"),R(Ia,a);case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ec(String.fromCharCode(a));case 34:case 39:a:{r++;for(b=[];;){r>=pa&&E(U,"Unterminated string constant");var c=z.charCodeAt(r);if(c===a){a=(++r,R(Ya,String.fromCharCode.apply(null,b)));break a}if(92===c){var c=z.charCodeAt(++r),d=/^[0-7]+/.exec(z.slice(r,r+3));for(d&&(d=d[0]);d&&255<parseInt(d,8);)d=d.slice(0,d.length-1);if("0"===d&&(d=null),++r,d)X&&E(r-2,"Octal literal in strict mode"),
b.push(parseInt(d,8)),r+=d.length-1;else switch(c){case 110:b.push(10);break;case 114:b.push(13);break;case 120:b.push(Za(2));break;case 117:b.push(Za(4));break;case 85:b.push(Za(8));break;case 116:b.push(9);break;case 98:b.push(8);break;case 118:b.push(11);break;case 102:b.push(12);break;case 48:b.push(0);break;case 13:10===z.charCodeAt(r)&&++r;case 10:break;default:b.push(c)}}else(13===c||10===c||8232===c||8329===c)&&E(U,"Unterminated string constant"),92!==c&&b.push(c),++r}a=void 0}return a;case 47:return sb?
(++r,cc()):61===b?S(ra,2):S(hc,1);case 37:case 42:return 61===b?S(ra,2):S(Vc,1);case 124:case 38:return b===a?S(124===a?Wc:Xc,2):61===b?S(ra,2):S(124===a?Yc:Zc,1);case 94:return 61===b?S(ra,2):S($c,1);case 43:case 45:return b===a?S(ad,2):61===b?S(ra,2):S(bd,1);case 60:case 62:return c=1,b===a?(c=62===a&&62===z.charCodeAt(r+2)?3:2,61===z.charCodeAt(r+c)?S(ra,c+1):S(cd,c)):(61===b&&(c=61===z.charCodeAt(r+2)?3:2),S(dd,c));case 61:case 33:return 61===b?S(ed,61===z.charCodeAt(r+2)?3:2):S(61===a?ic:jc,
1);case 126:return S(jc,1)}a=String.fromCharCode(a);return"\\"===a||$b.test(a)?dc():(E(r,"Unexpected character '"+a+"'"),void 0)},S=function(a,b){var c=z.slice(r,r+b);r+=b;R(a,c)},cc=function(){for(var a,b,c="",d=r;;){r>=pa&&E(d,"Unterminated regular expression");c=z.charAt(r);if(xb.test(c)&&E(d,"Unterminated regular expression"),a)a=!1;else{if("["===c)b=!0;else if("]"===c&&b)b=!1;else if("/"===c&&!b)break;a="\\"===c}++r}c=z.slice(d,r);++r;a=kc();return a&&!/^[gmsiy]*$/.test(a)&&E(d,"Invalid regexp flag"),
R(lc,RegExp(c,a))},Ha=function(a,b){for(var c=r,d=0;;){var e,f=z.charCodeAt(r);if(e=97<=f?f-97+10:65<=f?f-65+10:48<=f&&57>=f?f-48:1/0,e>=a)break;++r;d=d*a+e}return r===c||null!=b&&r-c!==b?null:d},ec=function(a){var b=r,c="."===a;if(c||null!=Ha(10)||E(b,"Invalid number"),c||"."===z.charAt(r))c=z.charAt(++r),("-"===c||"+"===c)&&++r,null===Ha(10)&&"."===a&&E(b,"Invalid number"),c=!0;/e/i.test(z.charAt(r))&&(c=z.charAt(++r),("-"===c||"+"===c)&&++r,null===Ha(10)&&E(b,"Invalid number"),c=!0);Sa(z.charCodeAt(r))&&
E(r,"Identifier directly after number");var d,e=z.slice(b,r);return c?d=parseFloat(e):"0"!==a||1===e.length?d=parseInt(e,10):/[89]/.test(e)||X?E(b,"Invalid number"):d=parseInt(e,8),R(Ia,d)},Za=function(a){a=Ha(16,a);return null===a&&E(U,"Bad character escape sequence"),a},kc=function(){sa=!1;for(var a,b=!0,c=r;;){var d=z.charCodeAt(r);if(ac(d))sa&&(a+=z.charAt(r)),++r;else{if(92!==d)break;sa||(a=z.slice(c,r));sa=!0;117!=z.charCodeAt(++r)&&E(r,"Expecting Unicode escape sequence \\uXXXX");++r;var d=
Za(4),e=String.fromCharCode(d);e||E(r-1,"Invalid Unicode escape");(b?Sa(d):ac(d))||E(r-4,"Invalid Unicode escape");a+=e}b=!1}return sa?a:z.slice(c,r)},dc=function(){var a=kc(),b=ta;return sa||(fd(a)?b=gd[a]:(J.forbidReserved&&(3===J.ecmaVersion?hd:id)(a)||X&&mc(a))&&E(U,"The keyword '"+a+"' is reserved")),R(b,a)},F=function(){yb=U;ea=Ea;zb=qb;$a()},Ab=function(a){X=a;r=ea;rb();$a()},T=function(){var a={type:null,start:U,end:null};return J.trackComments&&Xa&&(a.commentsBefore=Xa,Xa=null),J.locations&&
(a.loc={start:tb,end:null,source:nc}),J.ranges&&(a.range=[U,0]),a},ka=function(a){var b={type:null,start:a.start};return a.commentsBefore&&(b.commentsBefore=a.commentsBefore,a.commentsBefore=null),J.locations&&(b.loc={start:a.loc.start,end:null,source:a.loc.source}),J.ranges&&(b.range=[a.range[0],0]),b},D=function(a,b){return a.type=b,a.end=ea,J.trackComments&&(Wa?(a.commentsAfter=Wa,Wa=null):ua&&ua.end===ea&&ua.commentsAfter&&(a.commentsAfter=ua.commentsAfter,ua.commentsAfter=null),ua=a),J.locations&&
(a.loc.end=zb),J.ranges&&(a.range[1]=ea),a},Bb=function(a){return 5<=J.ecmaVersion&&"ExpressionStatement"===a.type&&"Literal"===a.expression.type&&"use strict"===a.expression.value},N=function(a){return B===a?(F(),!0):void 0},ab=function(){return!J.strictSemicolons&&(B===ub||B===qa||xb.test(z.slice(ea,U)))},Ja=function(){N(da)||ab()||fa()},P=function(a){B===a?F():fa()},fa=function(){E(U,"Unexpected token")},cb=function(a){"Identifier"!==a.type&&"MemberExpression"!==a.type&&E(a.start,"Assigning to rvalue");
X&&"Identifier"===a.type&&bb(a.name)&&E(a.start,"Assigning to "+a.name+" in strict mode")},$=function(){B===hc&&$a(!0);var a=B,b=T();switch(a){case Cb:case oc:F();var c=a===Cb;N(da)||ab()?b.label=null:B!==ta?fa():(b.label=ga(),Ja());for(var d=0;Q.length>d;++d){var e=Q[d];if(null==b.label||e.name===b.label.name){if(null!=e.kind&&(c||"loop"===e.kind))break;if(b.label&&c)break}}return d===Q.length&&E(b.start,"Unsyntactic "+a.keyword),D(b,c?"BreakStatement":"ContinueStatement");case pc:return F(),D(b,
"DebuggerStatement");case qc:return F(),Q.push(Db),b.body=$(),Q.pop(),P(Eb),b.test=Ka(),Ja(),D(b,"DoWhileStatement");case rc:if(F(),Q.push(Db),P(ca),B===da)return Fb(b,null);if(B===Gb)return a=T(),F(),sc(a,!0),1===a.declarations.length&&N(db)?tc(b,a):Fb(b,a);a=V(!1,!0);return N(db)?(cb(a),tc(b,a)):Fb(b,a);case Hb:return F(),Ib(b,!0);case uc:return F(),b.test=Ka(),b.consequent=$(),b.alternate=N(vc)?$():null,D(b,"IfStatement");case wc:return La||E(U,"'return' outside of function"),F(),N(da)||ab()?b.argument=
null:(b.argument=V(),Ja()),D(b,"ReturnStatement");case Jb:F();b.discriminant=Ka();b.cases=[];P(Fa);for(Q.push(jd);B!=qa;)B===Kb||B===xc?(a=B===Kb,d&&D(d,"SwitchCase"),b.cases.push(d=T()),d.consequent=[],F(),a?d.test=V():(c&&E(yb,"Multiple default clauses"),c=!0,d.test=null),P(Ga)):(d||fa(),d.consequent.push($()));return d&&D(d,"SwitchCase"),F(),Q.pop(),D(b,"SwitchStatement");case yc:return F(),xb.test(z.slice(ea,U))&&E(ea,"Illegal newline after throw"),b.argument=V(),D(b,"ThrowStatement");case zc:F();
b.block=Ma();for(b.handlers=[];B===Ac;)a=T(),F(),P(ca),a.param=ga(),X&&bb(a.param.name)&&E(a.param.start,"Binding "+a.param.name+" in strict mode"),P(ba),a.guard=null,a.body=Ma(),b.handlers.push(D(a,"CatchClause"));return b.finalizer=N(Bc)?Ma():null,b.handlers.length||b.finalizer||E(b.start,"Missing catch or finally clause"),D(b,"TryStatement");case Gb:return F(),b=sc(b),Ja(),b;case Eb:return F(),b.test=Ka(),Q.push(Db),b.body=$(),Q.pop(),D(b,"WhileStatement");case Cc:return X&&E(U,"'with' in strict mode"),
F(),b.object=Ka(),b.body=$(),D(b,"WithStatement");case Fa:return Ma();case da:return F(),D(b,"EmptyStatement");default:c=ha;e=V();if(a===ta&&"Identifier"===e.type&&N(Ga)){for(d=0;Q.length>d;++d)Q[d].name===c&&E(e.start,"Label '"+c+"' is already declared");return Q.push({name:c,kind:B.isLoop?"loop":B===Jb?"switch":null}),b.body=$(),b.label=e,D(b,"LabeledStatement")}return b.expression=e,Ja(),D(b,"ExpressionStatement")}},Ka=function(){P(ca);var a=V();return P(ba),a},Ma=function(){var a,b=T(),c=!0,d=
!1;b.body=[];for(P(Fa);!N(qa);){var e=$();b.body.push(e);c&&Bb(e)&&(a=d,Ab(d=!0));c=!1}return d&&!a&&Ab(!1),D(b,"BlockStatement")},Fb=function(a,b){return a.init=b,P(da),a.test=B===da?null:V(),P(da),a.update=B===ba?null:V(),P(ba),a.body=$(),Q.pop(),D(a,"ForStatement")},tc=function(a,b){return a.left=b,a.right=V(),P(ba),a.body=$(),Q.pop(),D(a,"ForInStatement")},sc=function(a,b){a.declarations=[];for(a.kind="var";;){var c=T();if(c.id=ga(),X&&bb(c.id.name)&&E(c.id.start,"Binding "+c.id.name+" in strict mode"),
c.init=N(ic)?V(!0,b):null,a.declarations.push(D(c,"VariableDeclarator")),!N(ja))break}return D(a,"VariableDeclaration")},V=function(a,b){var c=Lb(b);if(!a&&B===ja){var d=ka(c);for(d.expressions=[c];N(ja);)d.expressions.push(Lb(b));return D(d,"SequenceExpression")}return c},Lb=function(a){var b;b=Mb(Nb(a),-1,a);if(N(gc)){var c=ka(b);b=(c.test=b,c.consequent=V(!0),P(Ga),c.alternate=V(!0,a),D(c,"ConditionalExpression"))}return B.isAssign?(c=ka(b),c.operator=ha,c.left=b,F(),c.right=Lb(a),cb(b),D(c,"AssignmentExpression")):
b},Mb=function(a,b,c){var d=B.binop;if(null!=d&&(!c||B!==db)&&d>b){var e=ka(a);e.left=a;e.operator=ha;F();e.right=Mb(Nb(c),d,c);e=D(e,/&&|\|\|/.test(e.operator)?"LogicalExpression":"BinaryExpression");return Mb(e,b,c)}return a},Nb=function(a){if(B.prefix){var b=T(),c=B.isUpdate;return b.operator=ha,b.prefix=!0,F(),b.argument=Nb(a),c?cb(b.argument):X&&"delete"===b.operator&&"Identifier"===b.argument.type&&E(b.start,"Deleting local variable in strict mode"),D(b,c?"UpdateExpression":"UnaryExpression")}for(a=
Na(eb());B.postfix&&!ab();)b=ka(a),b.operator=ha,b.prefix=!1,b.argument=a,cb(a),F(),a=D(b,"UpdateExpression");return a},Na=function(a,b){if(N(fc)){var c=ka(a);return c.object=a,c.property=ga(!0),c.computed=!1,Na(D(c,"MemberExpression"),b)}return N(vb)?(c=ka(a),c.object=a,c.property=V(),c.computed=!0,P(wb),Na(D(c,"MemberExpression"),b)):!b&&N(ca)?(c=ka(a),c.callee=a,c.arguments=Ob(ba,!1),Na(D(c,"CallExpression"),b)):a},eb=function(){switch(B){case Dc:var a=T();return F(),D(a,"ThisExpression");case ta:return ga();
case Ia:case Ya:case lc:return a=T(),a.value=ha,a.raw=z.slice(U,Ea),F(),D(a,"Literal");case Ec:case Fc:case Gc:return a=T(),a.value=B.atomValue,F(),D(a,"Literal");case ca:var a=tb,b=U;F();var c=V();return c.start=b,c.end=Ea,J.locations&&(c.loc.start=a,c.loc.end=qb),J.ranges&&(c.range=[b,Ea]),P(ba),c;case vb:return a=T(),F(),a.elements=Ob(wb,!0,!0),D(a,"ArrayExpression");case Fa:a=T();b=!0;c=!1;a.properties=[];for(F();!N(qa);){if(b)b=!1;else if(P(ja),J.allowTrailingCommas&&N(qa))break;var d,e={key:B===
Ia||B===Ya?eb():ga(!0)},f=!1;if(N(Ga)?(e.value=V(!0),d=e.kind="init"):5<=J.ecmaVersion&&"Identifier"===e.key.type&&("get"===e.key.name||"set"===e.key.name)?(f=c=!0,d=e.kind=e.key.name,e.key=B===Ia||B===Ya?eb():ga(!0),!B===ca&&fa(),e.value=Ib(T(),!1)):fa(),"Identifier"===e.key.type&&(X||c))for(var g=0;a.properties.length>g;++g){var h=a.properties[g];if(h.key.name===e.key.name){var j=d==h.kind||f&&"init"===h.kind||"init"===d&&("get"===h.kind||"set"===h.kind);j&&!X&&"init"===d&&"init"===h.kind&&(j=!1);
j&&E(e.key.start,"Redefinition of property")}}a.properties.push(e)}return D(a,"ObjectExpression");case Hb:return a=T(),F(),Ib(a,!1);case Hc:return a=T(),F(),a.callee=Na(eb(!1),!0),a.arguments=N(ca)?Ob(ba,!1):[],D(a,"NewExpression");default:fa()}},Ib=function(a,b){B===ta?a.id=ga():b?fa():a.id=null;a.params=[];var c=!0;for(P(ca);!N(ba);)c?c=!1:P(ja),a.params.push(ga());var c=La,d=Q;if(La=!0,Q=[],a.body=Ma(!0),La=c,Q=d,X||a.body.body.length&&Bb(a.body.body[0]))for(c=a.id?-1:0;a.params.length>c;++c)if(d=
0>c?a.id:a.params[c],(mc(d.name)||bb(d.name))&&E(d.start,"Defining '"+d.name+"' in strict mode"),0<=c)for(var e=0;c>e;++e)d.name===a.params[e].name&&E(d.start,"Argument name clash in strict mode");return D(a,b?"FunctionDeclaration":"FunctionExpression")},Ob=function(a,b,c){for(var d=[],e=!0;!N(a);){if(e)e=!1;else if(P(ja),b&&J.allowTrailingCommas&&N(a))break;c&&B===ja?d.push(null):d.push(V(!0))}return d},ga=function(a){var b=T();return b.name=B===ta?ha:a&&!J.forbidReserved&&B.keyword||fa(),F(),D(b,
"Identifier")};Ra.version="0.0.1";var J,z,pa,nc;Ra.parse=function(a,b){z=a+"";pa=z.length;J=b||{};for(var c in Ic)J.hasOwnProperty(c)||(J[c]=Ic[c]);nc=J.sourceFile||null;var d=J.program;ob=1;r=Ua=0;Va=bc();sb=!0;ia=null;rb();yb=ea=r;J.locations&&(zb=pb());La=X=null;Q=[];$a();c=d||T();var e=!0;for(d||(c.body=[]);B!==ub;)d=$(),c.body.push(d),e&&Bb(d)&&Ab(!0),e=!1;return D(c,"Program")};var r,U,Ea,tb,qb,B,ha,Xa,Wa,sb,ia,ob,Ua,Va,yb,ea,zb,La,Q,X,sa,ua,Ic=Ra.defaultOptions={ecmaVersion:5,strictSemicolons:!1,
allowTrailingCommas:!0,forbidReserved:!1,trackComments:!1,locations:!1,ranges:!1,program:null,sourceFile:null},Sc=Ra.getLineInfo=function(a,b){for(var c=1,d=0;;){Ta.lastIndex=d;var e=Ta.exec(a);if(!(e&&b>e.index))break;++c;d=e.index+e[0].length}return{line:c,column:b-d}},Ia={type:"num"},lc={type:"regexp"},Ya={type:"string"},ta={type:"name"},ub={type:"eof"},Cb={keyword:"break"},Kb={keyword:"case",beforeExpr:!0},Ac={keyword:"catch"},oc={keyword:"continue"},pc={keyword:"debugger"},xc={keyword:"default"},
qc={keyword:"do",isLoop:!0},vc={keyword:"else",beforeExpr:!0},Bc={keyword:"finally"},rc={keyword:"for",isLoop:!0},Hb={keyword:"function"},uc={keyword:"if"},wc={keyword:"return",beforeExpr:!0},Jb={keyword:"switch"},yc={keyword:"throw",beforeExpr:!0},zc={keyword:"try"},Gb={keyword:"var"},Eb={keyword:"while",isLoop:!0},Cc={keyword:"with"},Hc={keyword:"new",beforeExpr:!0},Dc={keyword:"this"},Ec={keyword:"null",atomValue:null},Fc={keyword:"true",atomValue:!0},Gc={keyword:"false",atomValue:!1},db={keyword:"in",
binop:7,beforeExpr:!0},gd={"break":Cb,"case":Kb,"catch":Ac,"continue":oc,"debugger":pc,"default":xc,"do":qc,"else":vc,"finally":Bc,"for":rc,"function":Hb,"if":uc,"return":wc,"switch":Jb,"throw":yc,"try":zc,"var":Gb,"while":Eb,"with":Cc,"null":Ec,"true":Fc,"false":Gc,"new":Hc,"in":db,"instanceof":{keyword:"instanceof",binop:7},"this":Dc,"typeof":{keyword:"typeof",prefix:!0},"void":{keyword:"void",prefix:!0},"delete":{keyword:"delete",prefix:!0}},vb={type:"[",beforeExpr:!0},wb={type:"]"},Fa={type:"{",
beforeExpr:!0},qa={type:"}"},ca={type:"(",beforeExpr:!0},ba={type:")"},ja={type:",",beforeExpr:!0},da={type:";",beforeExpr:!0},Ga={type:":",beforeExpr:!0},fc={type:"."},gc={type:"?",beforeExpr:!0},hc={binop:10,beforeExpr:!0},ic={isAssign:!0,beforeExpr:!0},ra={isAssign:!0,beforeExpr:!0},bd={binop:9,prefix:!0,beforeExpr:!0},ad={postfix:!0,prefix:!0,isUpdate:!0},jc={prefix:!0,beforeExpr:!0},Wc={binop:1,beforeExpr:!0},Xc={binop:2,beforeExpr:!0},Yc={binop:3,beforeExpr:!0},$c={binop:4,beforeExpr:!0},Zc=
{binop:5,beforeExpr:!0},ed={binop:6,beforeExpr:!0},dd={binop:7,beforeExpr:!0},cd={binop:8,beforeExpr:!0},Vc={binop:10,beforeExpr:!0},hd=Da("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),id=Da("class enum extends super const export import"),mc=Da("implements interface let package private protected public static yield"),bb=Da("eval arguments"),
fd=Da("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Uc=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,$b=RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
Tc=RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0371-\u0374\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),
xb=/[\n\r\u2028\u2029]/,Ta=/\r\n|[\n\r\u2028\u2029]/g,Db={kind:"loop"},jd={kind:"switch"},na=this.PaperScript=new function(){function a(a){function b(a){for(var c=0,d=n.length;c<d;c++){var e=n[c];if(e[0]>=a)break;a+=e[1]}return a}function c(d){return a.substring(b(d.range[0]),b(d.range[1]))}function d(c,e){for(var f=b(c.range[0]),g=b(c.range[1]),k=0,m=n.length-1;0<=m;m--)if(f>n[m][0]){k=m+1;break}n.splice(k,0,[f,e.length-g+f]);a=a.substring(0,f)+e+a.substring(g)}function e(a){for(var b in a)if("range"!==
b){var h=a[b];if(Array.isArray(h))for(var j=0,n=h.length;j<n;j++)e(h[j]);else k.isPlainObject(h)&&e(h)}switch(a&&a.type){case "BinaryExpression":a.operator in f&&"Literal"!==a.left.type&&(b=c(a.left),h=c(a.right),d(a,"_$_("+b+', "'+a.operator+'", '+h+")"));break;case "AssignmentExpression":/^.=$/.test(a.operator)&&"Literal"!==a.left.type&&(b=c(a.left),h=c(a.right),d(a,b+" = _$_("+b+', "'+a.operator[0]+'", '+h+")"));break;case "UpdateExpression":a.prefix||(b=c(a.argument),d(a,b+" = _$_("+b+', "'+a.operator[0]+
'", 1)'));break;case "UnaryExpression":a.operator in g&&"Literal"!==a.argument.type&&(b=c(a.argument),d(a,'$_("'+a.operator+'", '+b+")"))}}var n=[];e(acorn.parse(a,{ranges:!0}));return a}function b(b,c){paper=c;var d=c.project&&c.project.view,e;with(c)(function(){e=eval(a(b));/on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(b)&&k.each(ya.prototype._events,function(a){var b=eval(a);b&&(c.getTool()[a]=b)});d&&(d.setOnResize(void 0),d.fire("resize",{size:d.size,delta:new n}),d.setOnFrame(void 0),d.draw())}).call(c);
return e}function c(a,c){var d=new (window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");d.open("GET",a,!0);d.overrideMimeType&&d.overrideMimeType("text/plain");d.onreadystatechange=function(){if(4===d.readyState)return b(d.responseText,c)};return d.send(null)}function d(){for(var a=document.getElementsByTagName("script"),d=0,e=a.length;d<e;d++){var f=a[d];if(/^text\/(?:x-|)paperscript$/.test(f.type)&&!f.getAttribute("data-paper-ignore")){var g=new xa(f);g.setup(na.getAttribute(f,"canvas"));
f.src?c(f.src,g):b(f.innerHTML,g);f.setAttribute("data-paper-ignore",!0)}}}function e(a){a+="Attribute";return function(b,c){return b[a](c)||b[a]("data-paper-"+c)}}var f={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"modulo","==":"equals","!=":"equals"},g={"-":"negate","+":null};I.add(window,{load:d});return{compile:a,evaluate:b,load:d,getAttribute:e("get"),hasAttribute:e("has")}};this.load=na.load;k.each(this,function(a,b){a&&a.prototype instanceof k&&(a._name=b)});this.enumerable=!0;
return new (xa.inject(this))};
